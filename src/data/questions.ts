import { Question } from '@/types/game';
import { ansibleQuestions } from './ansible-questions';
import { additionalLinuxQuestions, additionalBashQuestions, additionalGitQuestions, additionalDockerQuestions, additionalDevOpsQuestions } from './additional-questions';
import { kubernetesQuestions } from './kubernetes-questions';
import { terraformQuestions } from './terraform-questions';
import { awsQuestions } from './aws-questions';
import { cicdQuestions } from './cicd-questions';
import { openshiftQuestions } from './openshift-questions';

// Pre-generated AI Question Bank - 150+ DevOps Questions

const wrongFeedbackPool = [
  "Oops! That would definitely page the on-call team at 3 AM ðŸ˜…",
  "Nice try! But production would be crying right now ðŸ˜­",
  "A real DevOps engineer fails fast and learns faster ðŸš€",
  "Close! But that's how you get a Slack message at dinner ðŸ",
  "Hmm, that's how incidents start... ðŸš¨",
  "Your future self would debug this for hours ðŸ•",
  "The logs would be very confused right now ðŸ“œ",
  "That's a spicy way to break things! ðŸŒ¶ï¸",
  "Production would like to have a word with you ðŸ’¬",
  "Stack Overflow would judge you for this one ðŸ‘€",
];

const getRandomWrongFeedback = (): string[] => {
  const shuffled = [...wrongFeedbackPool].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 3);
};

export const questions: Question[] = [
  // ============ LEVEL 1: LINUX ROOKIE ============
  {
    id: 'linux-1',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'Which command lists all files including hidden ones in a directory?',
    options: ['ls -l', 'dir', 'ls -a', 'ls'],
    correctAnswer: 2,
    explanation: 'The -a flag shows all files including hidden ones (files starting with a dot). ls -l shows long format, and dir is a Windows command.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['files', 'commands', 'basics'],
  },
  {
    id: 'linux-2',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What does the command "pwd" stand for?',
    options: ['Print Working Directory', 'Password', 'Path to Working Directory', 'Present Working Dir'],
    correctAnswer: 0,
    explanation: 'pwd stands for "Print Working Directory" and shows the current directory path you are in.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['navigation', 'commands', 'basics'],
  },
  {
    id: 'linux-3',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'Which command is used to change directories?',
    options: ['chdir', 'mv', 'change', 'cd'],
    correctAnswer: 3,
    explanation: 'cd (change directory) is the command to navigate between directories. mv moves files, not your shell location.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['navigation', 'commands', 'basics'],
  },
  {
    id: 'linux-4',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What permission does "chmod 755" give to the owner?',
    options: ['Read only', 'Read and write', 'Read, write, and execute', 'Execute only'],
    correctAnswer: 2,
    explanation: '7 in octal means rwx (read=4 + write=2 + execute=1 = 7). So the owner gets full permissions.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['permissions', 'security', 'basics'],
  },
  {
    id: 'linux-5',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'Which command finds all .log files modified in the last 24 hours?',
    options: [
      'find . -name "*.log" -mtime -1',
      'locate *.log --time 24h',
      'search -name log -recent',
      'grep -r "*.log" --mtime 1',
    ],
    correctAnswer: 0,
    explanation: 'find with -name for pattern and -mtime -1 for files modified within the last day (24 hours).',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['find', 'files', 'intermediate'],
  },
  {
    id: 'linux-6',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What does the command "kill -9 1234" do?',
    options: [
      'Sends SIGTERM to process 1234',
      'Sends SIGKILL to process 1234 (forceful termination)',
      'Kills 9 processes starting from PID 1234',
      'Restarts process 1234 after 9 seconds',
    ],
    correctAnswer: 1,
    explanation: 'kill -9 sends SIGKILL (signal 9) which forcefully terminates the process immediately without cleanup.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['processes', 'signals', 'intermediate'],
  },
  {
    id: 'linux-7',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'Which command shows real-time system resource usage?',
    options: ['ps aux', 'top', 'free -m', 'df -h'],
    correctAnswer: 1,
    explanation: 'top provides a dynamic real-time view of system processes and resource usage. ps is a snapshot, free shows memory, df shows disk.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['monitoring', 'processes', 'intermediate'],
  },
  {
    id: 'linux-8',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What does "grep -r" do?',
    options: [
      'Reverses the search pattern',
      'Searches recursively through directories',
      'Uses regex patterns only',
      'Returns only the first match',
    ],
    correctAnswer: 1,
    explanation: 'The -r flag makes grep search recursively through all subdirectories for the pattern.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['grep', 'search', 'intermediate'],
  },
  {
    id: 'linux-9',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'Your server is running out of disk space. Which command helps identify the largest directories?',
    code: '# You need to find what\'s eating disk space',
    options: [
      'ls -la /',
      'du -sh /* | sort -hr | head -10',
      'df -h',
      'free -m',
    ],
    correctAnswer: 1,
    explanation: 'du -sh /* shows disk usage for each directory, sort -hr sorts by size (human-readable, reverse), head -10 shows top 10.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['disk', 'troubleshooting', 'advanced'],
  },
  {
    id: 'linux-10',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'How do you find which process is using port 8080?',
    options: [
      'ps aux | grep 8080',
      'netstat -tulpn | grep 8080',
      'find /proc -port 8080',
      'top -p 8080',
    ],
    correctAnswer: 1,
    explanation: 'netstat -tulpn shows all listening ports with their PIDs. grep 8080 filters for the specific port.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['networking', 'troubleshooting', 'advanced'],
  },
  {
    id: 'linux-11',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'What is the purpose of /etc/passwd file?',
    options: [
      'Stores encrypted user passwords',
      'Contains user account information',
      'Lists all system processes',
      'Configures network passwords',
    ],
    correctAnswer: 1,
    explanation: '/etc/passwd contains user account info (username, UID, GID, home dir, shell). Passwords are in /etc/shadow.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['users', 'security', 'advanced'],
  },
  {
    id: 'linux-12',
    levelId: 'linux',
    difficulty: 'evil',
    question: 'At 3 AM, your monitoring alerts that a server is unresponsive. You SSH in and find the system extremely slow. What\'s your FIRST diagnostic command?',
    options: [
      'reboot',
      'top or htop',
      'tail -f /var/log/syslog',
      'systemctl restart nginx',
    ],
    correctAnswer: 1,
    explanation: 'Always check system resources FIRST with top/htop to identify CPU, memory, or I/O issues before taking any action.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['incident', 'troubleshooting', 'evil'],
  },
  {
    id: 'linux-13',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'Which command creates a new directory?',
    options: ['mkdir', 'newdir', 'create', 'md'],
    correctAnswer: 0,
    explanation: 'mkdir (make directory) is the standard command to create new directories in Linux.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['files', 'commands', 'basics'],
  },
  {
    id: 'linux-14',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What does the command "tail -f /var/log/syslog" do?',
    options: [
      'Shows the first 10 lines of the file',
      'Follows the file and shows new lines in real-time',
      'Filters the log for errors only',
      'Shows file metadata',
    ],
    correctAnswer: 1,
    explanation: 'tail -f follows the file and continuously outputs new lines as they are appended - perfect for monitoring logs.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['logs', 'monitoring', 'intermediate'],
  },
  {
    id: 'linux-15',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'How do you add a user to the sudo group?',
    options: [
      'sudo adduser username sudo',
      'usermod -aG sudo username',
      'chmod +sudo username',
      'Both A and B are correct',
    ],
    correctAnswer: 3,
    explanation: 'Both commands work! adduser username sudo (Debian) or usermod -aG sudo username are valid approaches.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['users', 'permissions', 'advanced'],
  },
  {
    id: 'linux-16',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What does "cat file1 file2 > combined" do?',
    options: [
      'Compares two files',
      'Concatenates files and saves to combined',
      'Creates two copies of combined',
      'Deletes file1 and file2',
    ],
    correctAnswer: 1,
    explanation: 'cat concatenates files, and > redirects the output to a new file called "combined".',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['files', 'redirection', 'intermediate'],
  },
  {
    id: 'linux-17',
    levelId: 'linux',
    difficulty: 'evil',
    question: 'You accidentally ran "rm -rf /" as root. What happens?',
    options: [
      'Nothing, modern systems prevent this',
      'Only empty directories are removed',
      'The entire filesystem gets deleted',
      'It asks for confirmation first',
    ],
    correctAnswer: 2,
    explanation: 'Without --preserve-root, this command WILL delete everything. Modern rm has safeguards, but never rely on them!',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['danger', 'files', 'evil'],
  },
  {
    id: 'linux-18',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What is a symlink in Linux?',
    options: [
      'A compressed file format',
      'A symbolic link pointing to another file/directory',
      'A system synchronization tool',
      'A network connection type',
    ],
    correctAnswer: 1,
    explanation: 'A symbolic link (symlink) is a special file that points to another file or directory, like a shortcut.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['files', 'filesystem', 'intermediate'],
  },
  {
    id: 'linux-19',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'What does the sticky bit do on a directory?',
    options: [
      'Makes the directory read-only',
      'Prevents users from deleting files they don\'t own',
      'Encrypts the directory contents',
      'Automatically backs up the directory',
    ],
    correctAnswer: 1,
    explanation: 'The sticky bit on directories (like /tmp) allows only the file owner to delete their files, even if others have write permission.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['permissions', 'security', 'advanced'],
  },
  {
    id: 'linux-20',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'Which command displays the content of a file?',
    options: ['show', 'display', 'cat', 'read'],
    correctAnswer: 2,
    explanation: 'cat (concatenate) displays file contents to stdout. It can also combine multiple files.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['files', 'commands', 'basics'],
  },

  // ============ LEVEL 2: BASH NINJA ============
  {
    id: 'bash-1',
    levelId: 'bash',
    difficulty: 'easy',
    question: 'What does the shebang "#!/bin/bash" indicate?',
    options: [
      'A debug flag',
      'A comment line',
      'The script author',
      'The interpreter to use for the script',
    ],
    correctAnswer: 3,
    explanation: 'The shebang (#!) tells the system which interpreter to use to execute the script.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['basics', 'scripts', 'fundamentals'],
  },
  {
    id: 'bash-2',
    levelId: 'bash',
    difficulty: 'easy',
    question: 'How do you assign a value to a variable in Bash?',
    options: ['var="value"', '$var = "value"', 'set var = "value"', 'let var = "value"'],
    correctAnswer: 0,
    explanation: 'In Bash, variable assignment has NO spaces around the = sign. $var is used to READ the variable.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['variables', 'basics', 'syntax'],
  },
  {
    id: 'bash-3',
    levelId: 'bash',
    difficulty: 'easy',
    question: 'What does "$?" represent in Bash?',
    options: [
      'The number of arguments',
      'A random number',
      'The exit status of the last command',
      'The current script name',
    ],
    correctAnswer: 2,
    explanation: '$? contains the exit status of the last executed command. 0 means success, non-zero means error.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['variables', 'exit-codes', 'basics'],
  },
  {
    id: 'bash-4',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'What is the correct syntax for an if statement in Bash?',
    code: '# Check if file exists',
    options: [
      'if [ -f file.txt ]; then echo "exists"; fi',
      'if (-f file.txt) { echo "exists" }',
      'if file.txt exists then echo "exists"',
      'if test file.txt then echo "exists" end',
    ],
    correctAnswer: 0,
    explanation: 'Bash uses [ ] for conditions, ; then after the condition, and fi to close the if block.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['conditionals', 'syntax', 'intermediate'],
  },
  {
    id: 'bash-5',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'How do you iterate over files in a directory?',
    options: [
      'for file in /path/*; do echo $file; done',
      'foreach file in /path/* { echo file }',
      'loop file = /path/*: print file',
      'iterate /path/* as file: echo file',
    ],
    correctAnswer: 0,
    explanation: 'Bash uses for...in...do...done syntax. The glob /path/* expands to all files in the directory.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['loops', 'files', 'intermediate'],
  },
  {
    id: 'bash-6',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'What does "set -e" do at the start of a script?',
    options: [
      'Enables verbose mode',
      'Exits immediately if any command fails',
      'Sets environment variables',
      'Enables debug mode',
    ],
    correctAnswer: 1,
    explanation: 'set -e makes the script exit immediately when any command returns a non-zero exit status.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['error-handling', 'best-practices', 'intermediate'],
  },
  {
    id: 'bash-7',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'What is command substitution and which syntax is preferred?',
    code: 'current_date=???',
    options: [
      '`date` - backticks are preferred',
      '$(date) - dollar-parens is preferred',
      'Both work, but $(date) is preferred for nesting',
      '{date} - curly braces are standard',
    ],
    correctAnswer: 2,
    explanation: 'Both `date` and $(date) work, but $(date) is preferred because it can be nested and is more readable.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['substitution', 'best-practices', 'advanced'],
  },
  {
    id: 'bash-8',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'What does "2>&1" mean in Bash?',
    options: [
      'Redirects file descriptor 2 to file descriptor 1',
      'Compares two values',
      'Creates a pipe between processes',
      'Duplicates stdout',
    ],
    correctAnswer: 0,
    explanation: '2>&1 redirects stderr (fd 2) to stdout (fd 1), combining both output streams.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['redirection', 'file-descriptors', 'advanced'],
  },
  {
    id: 'bash-9',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'How do you create an array and access its elements in Bash?',
    options: [
      'arr=(a b c); echo ${arr[1]}',
      'arr=[a,b,c]; echo arr[1]',
      'array arr = (a,b,c); echo arr.1',
      'arr = {a, b, c}; echo arr[1]',
    ],
    correctAnswer: 0,
    explanation: 'Bash arrays use () for creation and ${arr[index]} for access. Note: arrays are 0-indexed.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['arrays', 'syntax', 'advanced'],
  },
  {
    id: 'bash-10',
    levelId: 'bash',
    difficulty: 'evil',
    question: 'Your deployment script works locally but fails in CI. The error shows "unexpected end of file". What\'s the MOST likely cause?',
    options: [
      'Missing shebang',
      'Windows line endings (CRLF vs LF)',
      'Wrong file permissions',
      'Script too long for CI',
    ],
    correctAnswer: 1,
    explanation: 'CRLF line endings from Windows cause "unexpected end of file" because \\r is interpreted as part of the command.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['debugging', 'ci-cd', 'evil'],
  },
  {
    id: 'bash-11',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'What does the -z flag test in Bash?',
    code: 'if [ -z "$var" ]; then ...',
    options: [
      'If variable is zero',
      'If string is empty (zero length)',
      'If file is zipped',
      'If variable is defined',
    ],
    correctAnswer: 1,
    explanation: '-z tests if a string has zero length (is empty). Use -n to test if NOT empty.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['conditionals', 'strings', 'intermediate'],
  },
  {
    id: 'bash-12',
    levelId: 'bash',
    difficulty: 'easy',
    question: 'How do you make a Bash script executable?',
    options: [
      'run script.sh',
      'chmod +x script.sh',
      'execute script.sh',
      'bash --enable script.sh',
    ],
    correctAnswer: 1,
    explanation: 'chmod +x adds execute permission to the file, allowing it to be run directly.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['permissions', 'basics', 'scripts'],
  },
  {
    id: 'bash-13',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'What is the purpose of "trap" in Bash scripts?',
    code: 'trap cleanup EXIT',
    options: [
      'Catches exceptions like try-catch',
      'Executes commands when signals are received',
      'Creates a loop trap',
      'Debugs script execution',
    ],
    correctAnswer: 1,
    explanation: 'trap allows you to specify commands to run when the script receives signals (like EXIT, SIGINT, SIGTERM).',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['signals', 'cleanup', 'advanced'],
  },
  {
    id: 'bash-14',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'What does "&&" do between commands?',
    code: 'command1 && command2',
    options: [
      'Runs both commands in parallel',
      'Runs command2 only if command1 succeeds',
      'Combines output of both commands',
      'Creates a background process',
    ],
    correctAnswer: 1,
    explanation: '&& is a logical AND - command2 only runs if command1 exits with status 0 (success).',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['operators', 'control-flow', 'intermediate'],
  },
  {
    id: 'bash-15',
    levelId: 'bash',
    difficulty: 'evil',
    question: 'A script works when run manually but fails in cron. Variables are empty. Why?',
    options: [
      'Cron doesn\'t support variables',
      'Cron has a minimal environment - PATH and other vars are different',
      'Cron scripts must be in /etc/cron.d',
      'Variables expire after 24 hours',
    ],
    correctAnswer: 1,
    explanation: 'Cron runs with a minimal environment. Always use full paths and source your profile or set variables explicitly.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['cron', 'debugging', 'evil'],
  },
  {
    id: 'bash-16',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'What does "$@" represent in a Bash function?',
    options: [
      'The script name',
      'All arguments as separate strings',
      'The number of arguments',
      'The last argument only',
    ],
    correctAnswer: 1,
    explanation: '$@ expands to all positional parameters as separate quoted strings. $* would join them.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['arguments', 'functions', 'intermediate'],
  },
  {
    id: 'bash-17',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'How do you read a file line by line in Bash?',
    options: [
      'for line in file.txt; do echo $line; done',
      'while read line; do echo "$line"; done < file.txt',
      'read file.txt | foreach line',
      'cat file.txt | loop line',
    ],
    correctAnswer: 1,
    explanation: 'while read with input redirection properly handles lines with spaces and special characters.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['files', 'loops', 'advanced'],
  },
  {
    id: 'bash-18',
    levelId: 'bash',
    difficulty: 'easy',
    question: 'What does "#" at the start of a line indicate?',
    options: [
      'Variable declaration',
      'Comment (ignored by interpreter)',
      'Include statement',
      'Root user command',
    ],
    correctAnswer: 1,
    explanation: '# starts a comment in Bash. Everything after # on that line is ignored.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['comments', 'basics', 'syntax'],
  },
  {
    id: 'bash-19',
    levelId: 'bash',
    difficulty: 'hard',
    question: 'What\'s the difference between single quotes \' and double quotes " in Bash?',
    options: [
      'No difference, they are interchangeable',
      'Single quotes preserve literal value, double quotes allow variable expansion',
      'Single quotes are for strings, double for numbers',
      'Double quotes escape special characters',
    ],
    correctAnswer: 1,
    explanation: 'Single quotes preserve everything literally. Double quotes allow $variable expansion and command substitution.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['quoting', 'variables', 'advanced'],
  },
  {
    id: 'bash-20',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'What does the "case" statement do in Bash?',
    options: [
      'Changes case of text (upper/lower)',
      'Pattern matching like switch statement',
      'Creates a test case',
      'Handles exceptions',
    ],
    correctAnswer: 1,
    explanation: 'case...esac provides pattern matching similar to switch statements in other languages.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['control-flow', 'patterns', 'intermediate'],
  },

  // ============ LEVEL 3: GIT SURVIVOR ============
  {
    id: 'git-1',
    levelId: 'git',
    difficulty: 'easy',
    question: 'What command creates a new Git branch?',
    options: ['git new branch', 'git branch new-branch', 'git create branch', 'git add branch'],
    correctAnswer: 1,
    explanation: 'git branch <name> creates a new branch. Use git checkout -b <name> to create AND switch to it.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['branches', 'basics', 'fundamentals'],
  },
  {
    id: 'git-2',
    levelId: 'git',
    difficulty: 'easy',
    question: 'How do you stage all changes for commit?',
    options: ['git commit -a', 'git add .', 'git stage all', 'git push .'],
    correctAnswer: 1,
    explanation: 'git add . stages all changes in the current directory. git add -A stages all changes in the entire repo.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['staging', 'basics', 'workflow'],
  },
  {
    id: 'git-3',
    levelId: 'git',
    difficulty: 'medium',
    question: 'What\'s the difference between "git merge" and "git rebase"?',
    options: [
      'No difference, they do the same thing',
      'Merge creates a merge commit, rebase rewrites history linearly',
      'Merge is for local, rebase is for remote',
      'Merge is faster, rebase is safer',
    ],
    correctAnswer: 1,
    explanation: 'Merge preserves history with a merge commit. Rebase replays your commits on top of the target branch, creating linear history.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['merge', 'rebase', 'intermediate'],
  },
  {
    id: 'git-4',
    levelId: 'git',
    difficulty: 'medium',
    question: 'You have uncommitted changes and need to switch branches. What command saves them temporarily?',
    options: ['git save', 'git stash', 'git store', 'git temp'],
    correctAnswer: 1,
    explanation: 'git stash temporarily shelves changes so you can switch branches. Use git stash pop to restore them.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['stash', 'workflow', 'intermediate'],
  },
  {
    id: 'git-5',
    levelId: 'git',
    difficulty: 'hard',
    question: 'You accidentally committed sensitive data. How do you remove it from Git history?',
    options: [
      'git delete commit',
      'git rm --cached file && git commit --amend',
      'git filter-branch or BFG Repo-Cleaner',
      'Just delete the file and commit',
    ],
    correctAnswer: 2,
    explanation: 'You need git filter-branch or BFG to rewrite history and remove the file from ALL commits. Simple deletion doesn\'t remove history.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['security', 'history', 'advanced'],
  },
  {
    id: 'git-6',
    levelId: 'git',
    difficulty: 'hard',
    question: 'What does "git cherry-pick" do?',
    options: [
      'Selects the best commits automatically',
      'Applies specific commits from one branch to another',
      'Removes unwanted commits',
      'Optimizes the repository',
    ],
    correctAnswer: 1,
    explanation: 'Cherry-pick applies the changes from specific commit(s) to your current branch without merging the entire branch.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['cherry-pick', 'commits', 'advanced'],
  },
  {
    id: 'git-7',
    levelId: 'git',
    difficulty: 'evil',
    question: 'You force pushed to main and overwrote your colleague\'s work. How do you recover their commits?',
    options: [
      'It\'s gone forever, restore from backup',
      'git reflog on the remote server (if accessible)',
      'Ask colleague to push again from their local',
      'Both B and C can work',
    ],
    correctAnswer: 3,
    explanation: 'If the colleague still has the commits locally, they can push. Otherwise, reflog on the server (if you have access) might help.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['recovery', 'disaster', 'evil'],
  },
  {
    id: 'git-8',
    levelId: 'git',
    difficulty: 'medium',
    question: 'What is a Git "detached HEAD" state?',
    options: [
      'A corrupted repository',
      'When HEAD points to a commit instead of a branch',
      'When the remote is disconnected',
      'A branch without commits',
    ],
    correctAnswer: 1,
    explanation: 'Detached HEAD means you\'re on a specific commit, not a branch. New commits won\'t belong to any branch unless you create one.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['head', 'concepts', 'intermediate'],
  },
  {
    id: 'git-9',
    levelId: 'git',
    difficulty: 'hard',
    question: 'How do you squash the last 3 commits into one?',
    options: [
      'git squash 3',
      'git rebase -i HEAD~3',
      'git merge --squash HEAD~3',
      'git commit --squash 3',
    ],
    correctAnswer: 1,
    explanation: 'Interactive rebase (git rebase -i HEAD~3) lets you squash, edit, reorder, or drop commits.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['rebase', 'squash', 'advanced'],
  },
  {
    id: 'git-10',
    levelId: 'git',
    difficulty: 'easy',
    question: 'What does "git clone" do?',
    options: [
      'Creates a copy of a file',
      'Creates a local copy of a remote repository',
      'Duplicates a branch',
      'Backs up commits',
    ],
    correctAnswer: 1,
    explanation: 'git clone creates a complete local copy of a remote repository including all branches and history.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['clone', 'basics', 'remote'],
  },
  {
    id: 'git-11',
    levelId: 'git',
    difficulty: 'medium',
    question: 'What is the purpose of .gitignore?',
    options: [
      'Ignores Git commands',
      'Specifies files that Git should not track',
      'Hides the .git folder',
      'Disables Git for certain users',
    ],
    correctAnswer: 1,
    explanation: '.gitignore lists patterns for files/directories that Git should ignore (not track or commit).',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['gitignore', 'workflow', 'intermediate'],
  },
  {
    id: 'git-12',
    levelId: 'git',
    difficulty: 'evil',
    question: 'Your CI pipeline fails with "merge conflict" on an automated merge. The conflict is in a lock file. Best resolution?',
    options: [
      'Manually fix the conflict in CI',
      'Delete the lock file and regenerate',
      'Rebase locally, regenerate lock file, push',
      'Disable the lock file check',
    ],
    correctAnswer: 2,
    explanation: 'Lock file conflicts should be resolved locally by rebasing/merging, then regenerating the lock file to ensure consistency.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['ci-cd', 'conflicts', 'evil'],
  },
  {
    id: 'git-13',
    levelId: 'git',
    difficulty: 'hard',
    question: 'What does "git bisect" help you do?',
    options: [
      'Split a large file into parts',
      'Find the commit that introduced a bug using binary search',
      'Divide a branch into two',
      'Separate staged and unstaged changes',
    ],
    correctAnswer: 1,
    explanation: 'git bisect uses binary search to efficiently find which commit introduced a bug by marking commits as good/bad.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['bisect', 'debugging', 'advanced'],
  },
  {
    id: 'git-14',
    levelId: 'git',
    difficulty: 'medium',
    question: 'What\'s the difference between "git fetch" and "git pull"?',
    options: [
      'They are the same command',
      'Fetch downloads changes, pull downloads AND merges',
      'Fetch is for branches, pull is for files',
      'Pull is faster than fetch',
    ],
    correctAnswer: 1,
    explanation: 'git fetch downloads remote changes without merging. git pull = git fetch + git merge.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['fetch', 'pull', 'intermediate'],
  },
  {
    id: 'git-15',
    levelId: 'git',
    difficulty: 'easy',
    question: 'How do you see the commit history?',
    options: ['git history', 'git log', 'git commits', 'git show all'],
    correctAnswer: 1,
    explanation: 'git log shows the commit history. Use git log --oneline for a compact view.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['log', 'basics', 'history'],
  },
  {
    id: 'git-16',
    levelId: 'git',
    difficulty: 'hard',
    question: 'What is a "fast-forward" merge?',
    options: [
      'A quick merge that skips tests',
      'When target branch pointer simply moves forward (no merge commit needed)',
      'Merging without reviewing changes',
      'A merge that prioritizes speed over safety',
    ],
    correctAnswer: 1,
    explanation: 'Fast-forward happens when the target branch has no new commits since you branched - the pointer just moves forward.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['merge', 'concepts', 'advanced'],
  },
  {
    id: 'git-17',
    levelId: 'git',
    difficulty: 'medium',
    question: 'How do you undo the last commit but keep the changes?',
    options: [
      'git revert HEAD',
      'git reset --soft HEAD~1',
      'git undo',
      'git uncommit',
    ],
    correctAnswer: 1,
    explanation: 'git reset --soft HEAD~1 moves HEAD back one commit but keeps changes staged. --mixed keeps them unstaged.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['reset', 'undo', 'intermediate'],
  },
  {
    id: 'git-18',
    levelId: 'git',
    difficulty: 'evil',
    question: 'You need to update a PR but git push says "rejected - non-fast-forward". Force push is disabled. What do you do?',
    options: [
      'Ask admin to enable force push',
      'Create a new PR',
      'Pull, resolve conflicts, push normally',
      'Delete the remote branch and push',
    ],
    correctAnswer: 2,
    explanation: 'Pull the remote changes, resolve any conflicts, then push. This maintains history and follows best practices.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['workflow', 'collaboration', 'evil'],
  },
  {
    id: 'git-19',
    levelId: 'git',
    difficulty: 'medium',
    question: 'What does "git remote -v" show?',
    options: [
      'Verbose commit history',
      'List of remote repositories with URLs',
      'Version of remote Git',
      'Virtual branches',
    ],
    correctAnswer: 1,
    explanation: 'git remote -v shows all configured remote repositories with their fetch and push URLs.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['remote', 'configuration', 'intermediate'],
  },
  {
    id: 'git-20',
    levelId: 'git',
    difficulty: 'hard',
    question: 'What is "git reflog" used for?',
    options: [
      'Viewing reference logs - history of where HEAD has been',
      'Logging errors',
      'Refreshing the log view',
      'Creating reference documentation',
    ],
    correctAnswer: 0,
    explanation: 'reflog shows the history of HEAD movements - essential for recovering "lost" commits after resets or rebases.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['reflog', 'recovery', 'advanced'],
  },

  // ============ LEVEL 4: DOCKER ARCHITECT ============
  {
    id: 'docker-1',
    levelId: 'docker',
    difficulty: 'easy',
    question: 'What is the difference between a Docker image and a container?',
    options: [
      'They are the same thing',
      'Image is the template, container is a running instance',
      'Container is the template, image is running instance',
      'Image is for development, container for production',
    ],
    correctAnswer: 1,
    explanation: 'An image is a read-only template. A container is a running instance of an image with its own filesystem and processes.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['concepts', 'basics', 'fundamentals'],
  },
  {
    id: 'docker-2',
    levelId: 'docker',
    difficulty: 'easy',
    question: 'What command runs a container in the background?',
    options: ['docker run -b', 'docker run -d', 'docker run --background', 'docker start'],
    correctAnswer: 1,
    explanation: 'docker run -d runs the container in detached mode (background). -it is for interactive mode.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['commands', 'basics', 'containers'],
  },
  {
    id: 'docker-3',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What is the purpose of a Dockerfile?',
    options: [
      'Documents Docker installation',
      'Defines instructions to build a Docker image',
      'Stores container logs',
      'Configures Docker daemon',
    ],
    correctAnswer: 1,
    explanation: 'A Dockerfile contains instructions (FROM, RUN, COPY, etc.) to build a Docker image layer by layer.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['dockerfile', 'build', 'intermediate'],
  },
  {
    id: 'docker-4',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What does the COPY instruction do in a Dockerfile?',
    code: 'COPY ./app /usr/src/app',
    options: [
      'Copies files from container to host',
      'Copies files from host to image',
      'Copies files between containers',
      'Copies environment variables',
    ],
    correctAnswer: 1,
    explanation: 'COPY copies files/directories from the build context (host) into the image filesystem.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['dockerfile', 'copy', 'intermediate'],
  },
  {
    id: 'docker-5',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'What is the difference between ENTRYPOINT and CMD in a Dockerfile?',
    options: [
      'No difference, they are aliases',
      'ENTRYPOINT is the main command, CMD provides default arguments',
      'CMD runs first, then ENTRYPOINT',
      'ENTRYPOINT is for development, CMD for production',
    ],
    correctAnswer: 1,
    explanation: 'ENTRYPOINT defines the executable. CMD provides default arguments that can be overridden at runtime.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['dockerfile', 'commands', 'advanced'],
  },
  {
    id: 'docker-6',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'How do you persist data when a container is deleted?',
    options: [
      'Data is always persisted automatically',
      'Use Docker volumes or bind mounts',
      'Use the --persist flag',
      'Save to environment variables',
    ],
    correctAnswer: 1,
    explanation: 'Volumes and bind mounts persist data outside the container lifecycle. Container filesystems are ephemeral.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['volumes', 'storage', 'advanced'],
  },
  {
    id: 'docker-7',
    levelId: 'docker',
    difficulty: 'evil',
    question: 'Your container image is 2GB and takes 10 minutes to build. How do you optimize it?',
    options: [
      'Use a larger build server',
      'Multi-stage builds, smaller base image, .dockerignore, layer ordering',
      'Compress the image after building',
      'Split into multiple containers',
    ],
    correctAnswer: 1,
    explanation: 'Multi-stage builds discard build dependencies, alpine/slim bases are smaller, .dockerignore excludes files, and ordering layers properly uses cache.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['optimization', 'best-practices', 'evil'],
  },
  {
    id: 'docker-8',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What does "docker-compose up -d" do?',
    options: [
      'Updates Docker Compose',
      'Starts all services defined in docker-compose.yml in detached mode',
      'Downloads all images',
      'Destroys all containers',
    ],
    correctAnswer: 1,
    explanation: 'docker-compose up builds, creates, and starts all services. -d runs them in the background.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['compose', 'commands', 'intermediate'],
  },
  {
    id: 'docker-9',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'What is the purpose of Docker networks?',
    options: [
      'Connect to the internet',
      'Enable communication between containers and isolate them',
      'Speed up downloads',
      'Store network logs',
    ],
    correctAnswer: 1,
    explanation: 'Docker networks allow containers to communicate while providing isolation. Containers on different networks can\'t reach each other.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['networking', 'containers', 'advanced'],
  },
  {
    id: 'docker-10',
    levelId: 'docker',
    difficulty: 'evil',
    question: 'Container logs show "OOMKilled". What happened and how do you fix it?',
    options: [
      'Out Of Memory - container exceeded memory limit. Increase limit or optimize app.',
      'Out Of Mounts - add more volumes',
      'Object Oriented Module error - fix the code',
      'Old Operating Module - update Docker',
    ],
    correctAnswer: 0,
    explanation: 'OOMKilled means the container exceeded its memory limit. Either increase the limit or fix memory leaks in your application.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['debugging', 'memory', 'evil'],
  },
  {
    id: 'docker-11',
    levelId: 'docker',
    difficulty: 'easy',
    question: 'How do you list all running containers?',
    options: ['docker containers', 'docker ps', 'docker list', 'docker running'],
    correctAnswer: 1,
    explanation: 'docker ps lists running containers. Use docker ps -a to see all containers including stopped ones.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['commands', 'basics', 'containers'],
  },
  {
    id: 'docker-12',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What is the purpose of .dockerignore?',
    options: [
      'Lists containers to ignore',
      'Excludes files from the build context',
      'Ignores certain Docker commands',
      'Hides images from docker images',
    ],
    correctAnswer: 1,
    explanation: '.dockerignore excludes files from the build context, making builds faster and images smaller.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['dockerfile', 'optimization', 'intermediate'],
  },
  {
    id: 'docker-13',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'What is a multi-stage Docker build?',
    code: 'FROM node:18 AS builder\n...\nFROM node:18-slim\nCOPY --from=builder /app/dist ./dist',
    options: [
      'Building multiple images at once',
      'Using multiple FROM statements to create smaller final images',
      'Building in multiple data centers',
      'Parallel image builds',
    ],
    correctAnswer: 1,
    explanation: 'Multi-stage builds use multiple FROM statements. You can copy artifacts from earlier stages, discarding build dependencies.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['dockerfile', 'optimization', 'advanced'],
  },
  {
    id: 'docker-14',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'How do you pass environment variables to a container?',
    options: [
      'docker run --env VAR=value',
      'docker run --setenv VAR value',
      'docker run VAR=value',
      'docker env set VAR=value',
    ],
    correctAnswer: 0,
    explanation: 'Use -e or --env to pass environment variables. You can also use --env-file for multiple variables.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['environment', 'configuration', 'intermediate'],
  },
  {
    id: 'docker-15',
    levelId: 'docker',
    difficulty: 'easy',
    question: 'What command stops a running container?',
    options: ['docker halt', 'docker stop', 'docker kill', 'docker end'],
    correctAnswer: 1,
    explanation: 'docker stop gracefully stops a container (SIGTERM then SIGKILL). docker kill sends SIGKILL immediately.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 10,
    tags: ['commands', 'basics', 'containers'],
  },
  {
    id: 'docker-16',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'What is the difference between ADD and COPY in Dockerfile?',
    options: [
      'No difference',
      'ADD can extract archives and fetch URLs, COPY is simpler and preferred',
      'COPY is for large files, ADD for small files',
      'ADD is deprecated',
    ],
    correctAnswer: 1,
    explanation: 'ADD has extra features (URL fetch, auto-extract tars) but COPY is preferred for transparency. Only use ADD when you need its features.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['dockerfile', 'best-practices', 'advanced'],
  },
  {
    id: 'docker-17',
    levelId: 'docker',
    difficulty: 'evil',
    question: 'Your application works locally but not in Docker. It can\'t connect to localhost:5432 (PostgreSQL). Why?',
    options: [
      'Docker doesn\'t support PostgreSQL',
      'localhost inside container refers to the container, not host',
      'Port 5432 is reserved',
      'Docker blocks database connections',
    ],
    correctAnswer: 1,
    explanation: 'Inside a container, localhost refers to the container itself! Use host.docker.internal or container networking.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['networking', 'debugging', 'evil'],
  },
  {
    id: 'docker-18',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What does "docker exec -it container_name bash" do?',
    options: [
      'Executes bash script on host',
      'Opens an interactive bash shell inside the running container',
      'Creates a new container with bash',
      'Exports container to bash file',
    ],
    correctAnswer: 1,
    explanation: 'docker exec runs a command in a running container. -it provides interactive terminal access.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['commands', 'debugging', 'intermediate'],
  },
  {
    id: 'docker-19',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'What is a Docker layer and why does order matter in Dockerfile?',
    options: [
      'Layers are backup copies',
      'Each instruction creates a cached layer; put frequently changing instructions last',
      'Layers are security levels',
      'Order doesn\'t matter, Docker optimizes automatically',
    ],
    correctAnswer: 1,
    explanation: 'Each instruction creates a layer that can be cached. Put stable instructions first (apt install) and changing ones last (COPY app code).',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['dockerfile', 'caching', 'advanced'],
  },
  {
    id: 'docker-20',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What is the purpose of EXPOSE in a Dockerfile?',
    options: [
      'Opens the port automatically',
      'Documents which ports the container listens on',
      'Exposes source code',
      'Makes the container public',
    ],
    correctAnswer: 1,
    explanation: 'EXPOSE is documentation. It doesn\'t actually publish ports - you need -p at runtime for that.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['dockerfile', 'networking', 'intermediate'],
  },

  // ============ LEVEL 5: DEVOPS MASTER ============
  {
    id: 'devops-1',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'Your CI/CD pipeline takes 45 minutes. What strategies can reduce build time?',
    options: [
      'Run all tests sequentially for accuracy',
      'Caching, parallelization, incremental builds, smaller base images',
      'Skip tests in CI',
      'Use a more powerful server only',
    ],
    correctAnswer: 1,
    explanation: 'Multiple strategies work together: cache dependencies, run tests in parallel, use multi-stage builds, and optimize what gets built.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['ci-cd', 'optimization', 'advanced'],
  },
  {
    id: 'devops-2',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Production is down. Users report 502 errors. You have 5 minutes. First step?',
    options: [
      'Check the code for bugs',
      'Restart all servers',
      'Check monitoring/logs to identify which component is failing',
      'Roll back to previous version',
    ],
    correctAnswer: 2,
    explanation: 'Always diagnose first! Check monitoring to identify the failing component before taking action. Blind restarts waste time.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['incident', 'troubleshooting', 'evil'],
  },
  {
    id: 'devops-3',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is the difference between blue-green and canary deployments?',
    options: [
      'They are the same thing',
      'Blue-green switches all traffic at once, canary gradually shifts traffic',
      'Blue-green is for databases, canary for applications',
      'Canary is faster than blue-green',
    ],
    correctAnswer: 1,
    explanation: 'Blue-green maintains two identical environments and switches traffic. Canary gradually routes a percentage of traffic to the new version.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['deployment', 'strategies', 'advanced'],
  },
  {
    id: 'devops-4',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Your container orchestration shows pods in CrashLoopBackOff. What does this mean and how do you debug?',
    options: [
      'Container is crashing and Kubernetes keeps restarting it. Check logs with kubectl logs.',
      'Network loop detected. Restart the cluster.',
      'Storage is full. Clear old images.',
      'Node is overloaded. Add more nodes.',
    ],
    correctAnswer: 0,
    explanation: 'CrashLoopBackOff means the container keeps crashing. Use kubectl logs and kubectl describe pod to find the root cause.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['kubernetes', 'debugging', 'evil'],
  },
  {
    id: 'devops-5',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is Infrastructure as Code (IaC) and why is it important?',
    options: [
      'Writing infrastructure documentation in code comments',
      'Managing infrastructure through code files that can be versioned and automated',
      'Coding inside virtual machines',
      'Converting infrastructure to programming language',
    ],
    correctAnswer: 1,
    explanation: 'IaC (Terraform, Pulumi, etc.) defines infrastructure in code files, enabling version control, review, automation, and reproducibility.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['iac', 'concepts', 'advanced'],
  },
  {
    id: 'devops-6',
    levelId: 'devops',
    difficulty: 'medium',
    question: 'What is the purpose of a load balancer?',
    options: [
      'Balances database load',
      'Distributes incoming traffic across multiple servers',
      'Reduces code complexity',
      'Balances CPU usage within a server',
    ],
    correctAnswer: 1,
    explanation: 'Load balancers distribute traffic across multiple backend servers for high availability and scalability.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['infrastructure', 'scaling', 'intermediate'],
  },
  {
    id: 'devops-7',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Interview Question: How would you design a system that needs 99.99% uptime?',
    options: [
      'Use the fastest server available',
      'Redundancy, health checks, auto-scaling, multi-region, automated failover',
      'Manual monitoring and quick incident response',
      'Over-provision resources significantly',
    ],
    correctAnswer: 1,
    explanation: '99.99% (4 nines) allows only ~52 minutes downtime/year. Requires multiple redundancy layers, automation, and geographic distribution.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['architecture', 'interview', 'evil'],
  },
  {
    id: 'devops-8',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is the purpose of Prometheus and Grafana together?',
    options: [
      'Prometheus stores code, Grafana deploys it',
      'Prometheus collects metrics, Grafana visualizes them',
      'Both are logging tools',
      'Security scanning tools',
    ],
    correctAnswer: 1,
    explanation: 'Prometheus scrapes and stores time-series metrics. Grafana creates dashboards and visualizations from that data.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['monitoring', 'observability', 'advanced'],
  },
  {
    id: 'devops-9',
    levelId: 'devops',
    difficulty: 'medium',
    question: 'What does "shift left" mean in DevOps?',
    options: [
      'Moving servers to a different data center',
      'Moving testing, security, and quality earlier in the development cycle',
      'Prioritizing left-side team members',
      'Shifting deployment schedule earlier',
    ],
    correctAnswer: 1,
    explanation: 'Shift left means incorporating testing, security, and quality checks earlier in development, not just before deployment.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['practices', 'culture', 'intermediate'],
  },
  {
    id: 'devops-10',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Your database shows signs of high load. SELECT queries are slow. What do you check first?',
    options: [
      'Add more database servers immediately',
      'Check slow query log, analyze explain plans, review indexes',
      'Increase server RAM',
      'Migrate to a different database type',
    ],
    correctAnswer: 1,
    explanation: 'Always diagnose first! Slow query logs and EXPLAIN plans reveal missing indexes or inefficient queries. Adding hardware is a last resort.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['database', 'troubleshooting', 'evil'],
  },
  {
    id: 'devops-11',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is the difference between horizontal and vertical scaling?',
    options: [
      'Horizontal is left-right, vertical is up-down on screen',
      'Vertical adds more power to one machine, horizontal adds more machines',
      'They are the same with different names',
      'Horizontal is for apps, vertical for databases',
    ],
    correctAnswer: 1,
    explanation: 'Vertical scaling = bigger machines (scale up). Horizontal scaling = more machines (scale out). Horizontal usually provides better fault tolerance.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['scaling', 'architecture', 'advanced'],
  },
  {
    id: 'devops-12',
    levelId: 'devops',
    difficulty: 'medium',
    question: 'What is a health check endpoint in microservices?',
    options: [
      'Endpoint for user health tracking',
      'Endpoint that returns service status for load balancers/orchestrators',
      'Security vulnerability scanner',
      'Performance benchmark endpoint',
    ],
    correctAnswer: 1,
    explanation: 'Health check endpoints (/health, /ready) allow load balancers and orchestrators to verify if a service is running properly.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['microservices', 'monitoring', 'intermediate'],
  },
  {
    id: 'devops-13',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Interview: Explain how you would handle secrets management in a CI/CD pipeline.',
    options: [
      'Store them in the git repository encrypted',
      'Use secret management tools (Vault, AWS Secrets Manager) and inject at runtime',
      'Hardcode them in environment variables in CI config',
      'Store in a shared document only team leads can access',
    ],
    correctAnswer: 1,
    explanation: 'Never store secrets in code/git. Use dedicated secret managers that inject secrets at runtime with audit trails and rotation capabilities.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['security', 'interview', 'evil'],
  },
  {
    id: 'devops-14',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is the purpose of a service mesh like Istio or Linkerd?',
    options: [
      'Connects services to WiFi networks',
      'Handles service-to-service communication, observability, and security',
      'Meshes database tables together',
      'Creates visual diagrams of services',
    ],
    correctAnswer: 1,
    explanation: 'Service meshes handle cross-cutting concerns: traffic management, mTLS security, observability, and resilience between microservices.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['microservices', 'infrastructure', 'advanced'],
  },
  {
    id: 'devops-15',
    levelId: 'devops',
    difficulty: 'medium',
    question: 'What is GitOps?',
    options: [
      'Using Git for operations documentation',
      'Using Git as the single source of truth for infrastructure and deployments',
      'Git optimization techniques',
      'Operating system for Git servers',
    ],
    correctAnswer: 1,
    explanation: 'GitOps uses Git repos as the source of truth. Changes to infrastructure are made via PRs, and agents sync the actual state to match.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['gitops', 'practices', 'intermediate'],
  },
  {
    id: 'devops-16',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Your team pushes 50 deployments/day. One causes an outage. How do you identify the problematic change?',
    options: [
      'Roll back all 50 and start over',
      'Check timestamps, correlate with monitoring alerts, use feature flags',
      'Ask developers who changed what',
      'Wait for users to report specific issues',
    ],
    correctAnswer: 1,
    explanation: 'Correlate deployment timestamps with alert times. Feature flags help isolate changes. Proper observability is key for fast identification.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['incident', 'practices', 'evil'],
  },
  {
    id: 'devops-17',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is the purpose of a CDN (Content Delivery Network)?',
    options: [
      'Delivers code to developers',
      'Caches and serves content from edge locations closer to users',
      'Network security tool',
      'Container deployment network',
    ],
    correctAnswer: 1,
    explanation: 'CDNs cache static content at edge locations globally, reducing latency and load on origin servers.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['infrastructure', 'performance', 'advanced'],
  },
  {
    id: 'devops-18',
    levelId: 'devops',
    difficulty: 'medium',
    question: 'What is a rollback strategy?',
    options: [
      'Rolling back exercise after sitting too long',
      'Plan to quickly revert to a previous working version if deployment fails',
      'Database backup rotation',
      'Log rotation strategy',
    ],
    correctAnswer: 1,
    explanation: 'A rollback strategy ensures you can quickly return to a known-good state when a deployment causes issues.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 20,
    tags: ['deployment', 'practices', 'intermediate'],
  },
  {
    id: 'devops-19',
    levelId: 'devops',
    difficulty: 'evil',
    question: 'Interview: Your company wants to migrate from monolith to microservices. How do you approach this?',
    options: [
      'Rewrite everything from scratch in microservices',
      'Strangler fig pattern - gradually extract services while keeping monolith running',
      'Stop all development until migration is complete',
      'Convert the monolith to containers, that makes it microservices',
    ],
    correctAnswer: 1,
    explanation: 'The strangler fig pattern gradually extracts functionality into services while keeping the monolith working. It\'s lower risk than big-bang rewrites.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 50,
    tags: ['architecture', 'interview', 'evil'],
  },
  {
    id: 'devops-20',
    levelId: 'devops',
    difficulty: 'hard',
    question: 'What is the difference between SLI, SLO, and SLA?',
    options: [
      'They are all the same - service level agreements',
      'SLI is the metric, SLO is the target, SLA is the contract with consequences',
      'Different names used by different cloud providers',
      'SLI for internal, SLO for customers, SLA for legal',
    ],
    correctAnswer: 1,
    explanation: 'SLI (Indicator) = measured metric. SLO (Objective) = target value. SLA (Agreement) = contract with penalties if SLO is not met.',
    wrongFeedback: getRandomWrongFeedback(),
    xpReward: 35,
    tags: ['observability', 'concepts', 'advanced'],
  },
];

// Combine all questions
export const allQuestions: Question[] = [
  ...questions,
  ...ansibleQuestions,
  ...additionalLinuxQuestions,
  ...additionalBashQuestions,
  ...additionalGitQuestions,
  ...additionalDockerQuestions,
  ...additionalDevOpsQuestions,
  ...kubernetesQuestions,
  ...terraformQuestions,
  ...awsQuestions,
  ...cicdQuestions,
  ...openshiftQuestions,
];

// Helper function to get questions by level
export const getQuestionsByLevel = (levelId: string): Question[] => {
  return allQuestions.filter(q => q.levelId === levelId);
};

// Helper function to get questions by difficulty
export const getQuestionsByDifficulty = (difficulty: string): Question[] => {
  return allQuestions.filter(q => q.difficulty === difficulty);
};

// Helper function to shuffle array
export const shuffleArray = <T>(array: T[]): T[] => {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
};

// Get a quiz set for a level
export const getQuizQuestions = (levelId: string, count: number = 10): Question[] => {
  const levelQuestions = getQuestionsByLevel(levelId);
  const shuffled = shuffleArray(levelQuestions);
  return shuffled.slice(0, Math.min(count, shuffled.length));
};
