import { Question } from '@/types/game';

const wrongFeedback = [
  'Not quite! Review and try again.',
  'Close! Check the explanation.',
  'Good attempt — see the correct answer below.',
];

// Junior DevOps / SRE interview questions (Linux, networking, bash, containers, K8s, Terraform, CI/CD, Ansible)
export const juniorInterviewQuestions: Question[] = [
  // --- Linux ---
  {
    id: 'j-linux-hardlink-softlink',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What is the difference between a hard link and a soft (symbolic) link?',
    options: [
      'Hard link shares inode, soft link is a separate file pointing to path',
      'Soft link shares inode, hard link is a separate file',
      'They are the same',
      'Hard links work across filesystems, soft links do not',
    ],
    correctAnswer: 0,
    explanation:
      'A hard link shares the same inode as the original file (same data on disk). A soft/symbolic link is a separate file that stores the path to the target; it can point across filesystems and to directories.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'filesystem', 'inode'],
  },
  {
    id: 'j-linux-reverse-forward-proxy',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What is the difference between a reverse proxy and a forward proxy?',
    options: [
      'Reverse proxy sits in front of servers (client → proxy → server); forward proxy sits in front of clients (client → proxy → internet)',
      'They are the same',
      'Forward proxy caches, reverse proxy does not',
      'Reverse proxy is for HTTPS only',
    ],
    correctAnswer: 0,
    explanation:
      'Reverse proxy: clients talk to the proxy, which forwards to backend servers (e.g. nginx, load balancer). Forward proxy: clients use the proxy to reach the internet (e.g. corporate proxy, curl -x).',
    wrongFeedback,
    xpReward: 20,
    tags: ['networking', 'proxy'],
  },
  {
    id: 'j-linux-free-memory',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What command shows free and used memory in a human-readable format?',
    options: ['mem -h', 'free -h', 'memory --human', 'top -m'],
    correctAnswer: 1,
    explanation: 'free -h shows total, used, free, and cached memory in human-readable units (e.g. GiB, MiB).',
    wrongFeedback,
    xpReward: 10,
    tags: ['linux', 'memory', 'commands'],
  },
  {
    id: 'j-linux-ui-troubleshoot',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'A UI application works on your machine but is not available on a headless server. How would you troubleshoot?',
    options: [
      'Install a desktop environment on the server',
      'Check if the app requires display/X11; use virtual framebuffer (Xvfb) or run in headless mode if supported',
      'Restart the server',
      'The app cannot run on servers',
    ],
    correctAnswer: 1,
    explanation:
      'Many GUI apps require a display. Use Xvfb (virtual framebuffer) to fake a display, or run the app in headless/CLI mode if it supports it (e.g. Chrome --headless).',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'troubleshooting', 'X11'],
  },
  {
    id: 'j-linux-404-troubleshoot',
    levelId: 'linux',
    difficulty: 'medium',
    question: "Walk through the steps you'd take to troubleshoot a 404 error on a web application you administer.",
    options: [
      'Restart the web server immediately',
      'Verify URL/path, check web server config (vhost, root, location), check file permissions and existence, check app routing (SPA vs server-side)',
      'Only check browser cache',
      'Replace the server',
    ],
    correctAnswer: 1,
    explanation:
      'Confirm the requested path; check nginx/apache config for document root and location blocks; ensure the file or route exists and permissions allow the server to read it; for SPAs, check fallback to index.html.',
    wrongFeedback,
    xpReward: 20,
    tags: ['troubleshooting', 'web', '404'],
  },
  {
    id: 'j-linux-umask',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What is umask and how does it affect new files and directories?',
    options: [
      'umask sets default permissions by masking (removing) bits; e.g. umask 022 gives files 644 and dirs 755',
      'umask adds permissions to new files',
      'umask only affects root',
      'umask is the same as chmod',
    ],
    correctAnswer: 0,
    explanation:
      'umask is a mask of bits to REMOVE from the default. Default file is 666, dir 777. umask 022 removes write for group/others, so new files get 644 and dirs 755.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'permissions', 'umask'],
  },
  {
    id: 'j-linux-boot-sequence',
    levelId: 'linux',
    difficulty: 'hard',
    question: 'What is the typical Linux boot sequence?',
    options: [
      'BIOS/UEFI → bootloader (GRUB) → kernel → initramfs → init/systemd → user space',
      'Kernel → BIOS → systemd',
      'GRUB → BIOS → kernel',
      'init → kernel → bootloader',
    ],
    correctAnswer: 0,
    explanation:
      'Firmware (BIOS/UEFI) loads bootloader (e.g. GRUB), which loads kernel and initramfs; kernel mounts root, runs init (systemd); systemd brings up targets and user space.',
    wrongFeedback,
    xpReward: 35,
    tags: ['linux', 'boot', 'systemd'],
  },
  {
    id: 'j-linux-swap',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What is swap and what is it used for?',
    options: [
      'Swap is disk space used as virtual memory when RAM is full',
      'Swap is a backup of RAM',
      'Swap is CPU cache',
      'Swap is only for hibernation',
    ],
    correctAnswer: 0,
    explanation:
      'Swap is disk space used as extended memory. When RAM is full, less-used pages can be moved to swap to free RAM. Also used for hibernation (suspend-to-disk).',
    wrongFeedback,
    xpReward: 10,
    tags: ['linux', 'memory', 'swap'],
  },
  {
    id: 'j-linux-cpu-info',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'Which command can show detailed information about the CPU (and other hardware)?',
    options: ['cpuinfo', 'lscpu', 'lshw', 'Both lscpu and lshw'],
    correctAnswer: 3,
    explanation: 'lscpu shows CPU info (model, cores, threads). lshw lists hardware including CPU. Both are commonly used.',
    wrongFeedback,
    xpReward: 10,
    tags: ['linux', 'hardware', 'cpu'],
  },
  {
    id: 'j-linux-sticky-bit',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What does the sticky bit do on a directory (e.g. /tmp)?',
    options: [
      'Makes the directory read-only',
      'Only the owner of a file can delete it, even if others have write permission',
      'Encrypts files in the directory',
      'Prevents any deletion',
    ],
    correctAnswer: 1,
    explanation: 'Sticky bit on a directory (e.g. chmod 1777 /tmp) allows only the file owner (and root) to delete or rename files there, even when others have write permission.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'permissions', 'sticky-bit'],
  },
  {
    id: 'j-linux-inode',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What is an inode and what is stored in it? Why is the filename stored separately from the inode?',
    options: [
      'Inode stores metadata (size, permissions, timestamps, pointers to data); filename is in directory entries so multiple names (hard links) can point to same inode',
      'Inode stores the filename and data',
      'Filename is stored in the inode',
      'Inodes are only for directories',
    ],
    correctAnswer: 0,
    explanation:
      'Inode holds metadata (owner, size, timestamps, block pointers). Directory entries map filenames to inodes. Separating them allows hard links: multiple names for the same inode.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'filesystem', 'inode'],
  },
  {
    id: 'j-linux-lvm',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What is LVM (Logical Volume Manager)?',
    options: [
      'A backup tool',
      'Abstraction layer over disks: physical volumes → volume groups → logical volumes for flexible resizing and snapshots',
      'A filesystem type',
      'A network volume protocol',
    ],
    correctAnswer: 1,
    explanation: 'LVM abstracts storage: PVs (disks/partitions) form VGs; LVs are created from VGs. You can resize LVs, add PVs, and take snapshots without repartitioning.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'storage', 'lvm'],
  },
  {
    id: 'j-linux-locate-find',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What is the difference between locate and find?',
    options: [
      'locate uses a pre-built database (fast) and may be stale; find searches filesystem in real time (slower, always current)',
      'They are the same',
      'find is faster than locate',
      'locate only works as root',
    ],
    correctAnswer: 0,
    explanation: 'locate queries a database (updated by updatedb), so it is fast but may not show recently added files. find traverses the filesystem in real time.',
    wrongFeedback,
    xpReward: 10,
    tags: ['linux', 'search', 'commands'],
  },
  {
    id: 'j-linux-list-files',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'Name three different ways/commands to list files in a directory.',
    options: [
      'ls, dir, echo *',
      'ls, dir, get-childitem',
      'ls, ls -l, ls -la (or ls -a)',
      'list, dir, show',
    ],
    correctAnswer: 2,
    explanation: 'ls (plain), ls -l (long format), ls -la or ls -a (include hidden). Other valid answers: dir (alias on some systems), echo * (shell glob).',
    wrongFeedback,
    xpReward: 10,
    tags: ['linux', 'commands', 'ls'],
  },
  {
    id: 'j-linux-zombie',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What is a zombie process?',
    options: [
      'A process that has exited but whose exit status has not yet been reaped by its parent',
      'A process that is frozen',
      'A process using too much memory',
      'A process that cannot be killed',
    ],
    correctAnswer: 0,
    explanation: 'A zombie (defunct) is a process that has terminated but still has an entry in the process table because the parent has not called wait(). The parent (or init if orphaned) must reap it.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'processes', 'zombie'],
  },
  {
    id: 'j-linux-file-types',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What are the main file types in Linux (by inode)?',
    options: [
      'Regular file, directory, symbolic link, block device, character device, socket, FIFO',
      'Only file and directory',
      'Text and binary only',
      'Executable and non-executable',
    ],
    correctAnswer: 0,
    explanation: 'Linux file types: regular (-), directory (d), symlink (l), block device (b), character device (c), socket (s), FIFO/pipe (p). See ls -l first column.',
    wrongFeedback,
    xpReward: 10,
    tags: ['linux', 'filesystem', 'file-types'],
  },
  {
    id: 'j-linux-cgroups',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'What are cgroups (control groups) used for?',
    options: [
      'Limiting and measuring resource usage (CPU, memory, I/O) of groups of processes',
      'Controlling network groups only',
      'Grouping users',
      'Backup groups',
    ],
    correctAnswer: 0,
    explanation: 'cgroups limit, account, and isolate resource usage (CPU, memory, disk I/O, etc.) for a set of processes. Containers (Docker, K8s) use cgroups to enforce limits.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'cgroups', 'containers'],
  },
  {
    id: 'j-linux-process-priority',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'How do you increase or decrease a process priority on Linux?',
    options: [
      'nice and renice (for nice value); lower nice = higher priority',
      'chmod +priority',
      'top only',
      'Only at process start',
    ],
    correctAnswer: 0,
    explanation: 'nice runs a process with a given nice value (-20 to 19; lower = higher priority). renice changes the nice value of an existing process. Root can set negative nice.',
    wrongFeedback,
    xpReward: 20,
    tags: ['linux', 'processes', 'scheduling'],
  },
  {
    id: 'j-linux-oom',
    levelId: 'linux',
    difficulty: 'hard',
    question: "When the Linux kernel starts the OOM killer, how does it choose which process to kill first?",
    options: [
      'It kills the process using the most memory; it uses a score (oom_score) based on memory usage, adjustability (oom_score_adj), and other factors',
      'It kills the newest process',
      'It kills the oldest process',
      'Random selection',
    ],
    correctAnswer: 0,
    explanation: 'OOM killer scores processes (oom_score); higher = more likely to be killed. Memory usage, oom_score_adj (tunable), and whether the process is critical (e.g. systemd) are considered.',
    wrongFeedback,
    xpReward: 35,
    tags: ['linux', 'memory', 'oom'],
  },
  {
    id: 'j-linux-ddos',
    levelId: 'linux',
    difficulty: 'medium',
    question: 'How can you help mitigate a DDoS attack at the server/network level?',
    options: [
      'Rate limiting, firewall rules, upstream filtering (e.g. Cloudflare), scaling, blacklisting IPs',
      'Restart the server',
      'Disable the network',
      'Only at application level',
    ],
    correctAnswer: 0,
    explanation: 'Use rate limiting (nginx, iptables), WAF/CDN (e.g. Cloudflare) to absorb and filter traffic, scale out, block abusive IPs, and work with upstream providers.',
    wrongFeedback,
    xpReward: 20,
    tags: ['security', 'networking', 'ddos'],
  },
  {
    id: 'j-linux-public-private-ip',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What is the difference between a public IP and a private IP?',
    options: [
      'Public IP is routable on the internet; private IP (e.g. 10.x, 172.16–31.x, 192.168.x) is for internal networks and not routed on the public internet',
      'They are the same',
      'Private IP is more secure by itself',
      'Public IP is only for servers',
    ],
    correctAnswer: 0,
    explanation: 'Public IPs are globally routable. Private ranges (RFC 1918) are used inside networks; NAT (e.g. on router) translates to public IP for outbound traffic.',
    wrongFeedback,
    xpReward: 10,
    tags: ['networking', 'ip', 'rfc1918'],
  },
  {
    id: 'j-linux-dns-commands',
    levelId: 'linux',
    difficulty: 'easy',
    question: 'What commands can you use to check DNS records?',
    options: ['Only nslookup', 'dig, nslookup, host (and getent hosts)',
      'ping only', 'curl only'],
    correctAnswer: 1,
    explanation: 'dig, nslookup, and host are common. getent hosts <name> uses system resolver. You can also use resolvectl (systemd-resolve) on some systems.',
    wrongFeedback,
    xpReward: 10,
    tags: ['dns', 'networking', 'commands'],
  },
  {
    id: 'j-bash-shebang',
    levelId: 'bash',
    difficulty: 'easy',
    question: 'If you do not write a shebang (e.g. #!/bin/bash) on the first line of a script, what happens when you execute it?',
    options: [
      'The script runs with the default shell (often /bin/sh)',
      'It fails to execute',
      'It always runs with bash',
      'Nothing; shebang is optional',
    ],
    correctAnswer: 0,
    explanation: 'Without a shebang, the kernel may use the default shell (often /bin/sh). If you run it with ./script, the executing shell might run it in its own interpreter. Explicitly running bash script.sh uses bash.',
    wrongFeedback,
    xpReward: 10,
    tags: ['bash', 'shebang', 'scripting'],
  },
  {
    id: 'j-bash-script-no-effect',
    levelId: 'bash',
    difficulty: 'medium',
    question: 'A script defines functions and runs without errors but does nothing. What are likely causes?',
    options: [
      'Functions are defined but never called; or errors are redirected to /dev/null so failures are hidden',
      'The script is read-only',
      'Bash is not installed',
      'The script must be sourced, not executed',
    ],
    correctAnswer: 0,
    explanation: 'Defining a function does not run it—you must call it. Also, if stderr is redirected to /dev/null or set -e is not used, failing commands may be silent.',
    wrongFeedback,
    xpReward: 20,
    tags: ['bash', 'debugging', 'functions'],
  },
  // --- Containers & VMs ---
  {
    id: 'j-container-vm',
    levelId: 'docker',
    difficulty: 'easy',
    question: 'What is the main difference between a container and a VM?',
    options: [
      'Containers share the host kernel; VMs run a full OS with their own kernel via hypervisor',
      'Containers are heavier than VMs',
      'VMs cannot run Linux',
      'Containers need a hypervisor',
    ],
    correctAnswer: 0,
    explanation: 'Containers share the host kernel and use namespaces/cgroups for isolation. VMs run a full guest OS and kernel on virtualized hardware (hypervisor).',
    wrongFeedback,
    xpReward: 10,
    tags: ['containers', 'vm', 'concepts'],
  },
  {
    id: 'j-hypervisor-types',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What are Type 1 (bare-metal) and Type 2 (hosted) hypervisors?',
    options: [
      'Type 1 runs directly on hardware (e.g. ESXi, KVM); Type 2 runs on top of an OS (e.g. VirtualBox, VMware Workstation)',
      'Type 1 is for development only',
      'Type 2 is faster than Type 1',
      'They are the same',
    ],
    correctAnswer: 0,
    explanation: 'Type 1 (bare-metal): hypervisor is the OS (VMware ESXi, Hyper-V, KVM). Type 2: hypervisor runs as an app on a host OS (VirtualBox, VMware Workstation).',
    wrongFeedback,
    xpReward: 20,
    tags: ['virtualization', 'hypervisor'],
  },
  {
    id: 'j-namespaces-cgroups-containers',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'How do namespaces and cgroups relate to containers?',
    options: [
      'Namespaces isolate (PID, network, mount, etc.); cgroups limit resources (CPU, memory). Together they provide isolation and resource control.',
      'Only cgroups are used',
      'Only namespaces are used',
      'They are the same',
    ],
    correctAnswer: 0,
    explanation: 'Namespaces isolate process, network, mount, UTS, IPC, user. cgroups limit and account for CPU, memory, I/O. Containers use both for isolation and limits.',
    wrongFeedback,
    xpReward: 20,
    tags: ['containers', 'namespaces', 'cgroups'],
  },
  {
    id: 'j-docker-image-size-speed',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'How can you reduce Docker image size and build speed?',
    options: [
      'Multi-stage builds, smaller base images (alpine/slim), .dockerignore, order layers so less-changing steps are first (cache)',
      'Only use alpine',
      'Compress images after build',
      'Disable cache',
    ],
    correctAnswer: 0,
    explanation: 'Multi-stage builds drop build deps; alpine/slim bases reduce size; .dockerignore reduces context; layer order improves cache hit rate and speeds rebuilds.',
    wrongFeedback,
    xpReward: 20,
    tags: ['docker', 'optimization', 'dockerfile'],
  },
  {
    id: 'j-dockerfile-image',
    levelId: 'docker',
    difficulty: 'easy',
    question: 'What is a Dockerfile and what is meant by "image"?',
    options: [
      'Dockerfile is a set of instructions to build an image; image is a read-only template (layers) used to create containers',
      'Dockerfile is the running container',
      'Image is the same as container',
      'Dockerfile is only for documentation',
    ],
    correctAnswer: 0,
    explanation: 'Dockerfile defines build steps (FROM, RUN, COPY, etc.). Building produces an image—a read-only layered filesystem. Containers are run from images.',
    wrongFeedback,
    xpReward: 10,
    tags: ['docker', 'dockerfile', 'image'],
  },
  {
    id: 'j-docker-entrypoint-cmd',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'What is the difference between ENTRYPOINT and CMD in a Dockerfile?',
    options: [
      'ENTRYPOINT is the executable (often fixed); CMD provides default arguments that can be overridden at docker run',
      'They are the same',
      'CMD runs first',
      'ENTRYPOINT is only for shell form',
    ],
    correctAnswer: 0,
    explanation: 'ENTRYPOINT defines the main process; CMD gives default args. docker run <image> myarg overrides CMD. ENTRYPOINT can be overridden with --entrypoint.',
    wrongFeedback,
    xpReward: 20,
    tags: ['docker', 'dockerfile', 'entrypoint'],
  },
  {
    id: 'j-docker-flow',
    levelId: 'docker',
    difficulty: 'hard',
    question: 'Describe the Docker flow from CLI to running container.',
    options: [
      'CLI (docker) → Docker daemon (dockerd) → containerd → runc (OCI runtime) → container',
      'CLI talks directly to runc',
      'containerd is not used',
      'Only dockerd and runc',
    ],
    correctAnswer: 0,
    explanation: 'docker CLI talks to dockerd; dockerd delegates to containerd for image and container lifecycle; containerd uses runc (or other OCI runtime) to run the container.',
    wrongFeedback,
    xpReward: 35,
    tags: ['docker', 'architecture', 'containerd'],
  },
  {
    id: 'j-docker-memory-cpu-limit',
    levelId: 'docker',
    difficulty: 'medium',
    question: 'How do you control memory and CPU limits for a container?',
    options: [
      'docker run --memory and --cpus (or --cpu-quota); or in compose: deploy.resources.limits',
      'Only in Dockerfile',
      'Only via host OS',
      'Not possible in Docker',
    ],
    correctAnswer: 0,
    explanation: 'docker run -m 512m --cpus=1.5 (or --cpu-quota). In Compose: deploy.resources.limits.memory and cpus. Under the hood this uses cgroups.',
    wrongFeedback,
    xpReward: 20,
    tags: ['docker', 'resources', 'limits'],
  },
  {
    id: 'j-docker-registry-credentials',
    levelId: 'docker',
    difficulty: 'easy',
    question: 'Where does Docker store image registry credentials (for docker login)?',
    options: [
      'In ~/.docker/config.json (auths section)',
      'In environment variables only',
      'In /etc/docker/credentials',
      'Docker does not store them',
    ],
    correctAnswer: 0,
    explanation: 'docker login stores credentials in ~/.docker/config.json under the "auths" key (or credential helpers can be configured).',
    wrongFeedback,
    xpReward: 10,
    tags: ['docker', 'registry', 'credentials'],
  },
  // --- Kubernetes ---
  {
    id: 'j-k8s-components',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What are the main components of a Kubernetes cluster?',
    options: [
      'Control plane: API server, etcd, scheduler, controller-manager; nodes: kubelet, kube-proxy, container runtime',
      'Only API server and kubelet',
      'Only etcd and scheduler',
      'There is no control plane',
    ],
    correctAnswer: 0,
    explanation: 'Control plane: API server, etcd (state), scheduler, controller-manager. Nodes: kubelet (runs pods), kube-proxy (networking), container runtime (containerd, CRI-O).',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'architecture', 'components'],
  },
  {
    id: 'j-k8s-scheduler',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'How does the scheduler decide which node to place a pod on?',
    options: [
      'It scores nodes (resources, constraints, affinity, etc.) and chooses the best fit',
      'Random selection',
      'First available node only',
      'Only by resource requests',
    ],
    correctAnswer: 0,
    explanation: 'Scheduler filters feasible nodes (resources, node affinity, taints/tolerations, etc.), then scores them (e.g. least requested, balanced). Pod is bound to the chosen node.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'scheduler', 'scheduling'],
  },
  {
    id: 'j-k8s-kubelet',
    levelId: 'kubernetes',
    difficulty: 'easy',
    question: 'What is the role of the kubelet on a node?',
    options: [
      'Ensures containers in pods are running; reports node and pod status to control plane; runs the container runtime',
      'Only runs the scheduler',
      'Only manages etcd',
      'Only does networking',
    ],
    correctAnswer: 0,
    explanation: 'Kubelet is the node agent: it receives pod specs, ensures containers are running (via container runtime), mounts volumes, and reports status to the API server.',
    wrongFeedback,
    xpReward: 10,
    tags: ['kubernetes', 'kubelet', 'nodes'],
  },
  {
    id: 'j-k8s-kubeconfig',
    levelId: 'kubernetes',
    difficulty: 'easy',
    question: 'What is the kubeconfig file used for?',
    options: [
      'Stores cluster, user, and context info so kubectl knows how to connect and authenticate to the cluster',
      'Stores only cluster URL',
      'It is the cluster state file',
      'Only for TLS certificates',
    ],
    correctAnswer: 0,
    explanation: 'kubeconfig (default ~/.kube/config) holds clusters, users, and contexts. It tells kubectl which API server to use and which credentials to use.',
    wrongFeedback,
    xpReward: 10,
    tags: ['kubernetes', 'kubectl', 'kubeconfig'],
  },
  {
    id: 'j-k8s-deployment-fails',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'A deployment is not rolling out or pods are failing. How do you troubleshoot?',
    options: [
      'kubectl describe deployment/pod, kubectl logs, kubectl get events; check image pull, resources, readiness/liveness, and pod events',
      'Only restart the deployment',
      'Only check the Docker image',
      'Delete and recreate the namespace',
    ],
    correctAnswer: 0,
    explanation: 'describe shows events and state; logs show app errors; get events shows cluster-level events. Common issues: image pull errors, OOMKilled, failed readiness, Pending (scheduling).',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'troubleshooting', 'deployment'],
  },
  {
    id: 'j-k8s-auth-methods',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What authentication methods does Kubernetes support for API access?',
    options: [
      'X.509 client certs, bearer tokens, OIDC, service account tokens, and (via API gateway) basic auth',
      'Only passwords',
      'Only TLS',
      'Only OAuth',
    ],
    correctAnswer: 0,
    explanation: 'Kubernetes supports client certificates, static token file, bootstrap tokens, service account JWT, and OIDC integration. Auth is handled by the API server.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'security', 'authentication'],
  },
  {
    id: 'j-k8s-deployment-strategies',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What deployment strategies do you know in Kubernetes?',
    options: [
      'Rolling update, recreate, blue/green (two deployments + switch), canary (subset of traffic to new version)',
      'Only rolling update',
      'Only blue/green',
      'Kubernetes has no strategies',
    ],
    correctAnswer: 0,
    explanation: 'Built-in: RollingUpdate (default) and Recreate. Blue/green and canary are done with multiple deployments and/or ingress/service routing.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'deployment', 'strategies'],
  },
  {
    id: 'j-k8s-canary-blue-green',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What is the difference between canary and blue-green deployment?',
    options: [
      'Blue-green: two full environments, switch all traffic at once; canary: gradually shift a portion of traffic to the new version',
      'They are the same',
      'Canary is faster',
      'Blue-green uses only one environment',
    ],
    correctAnswer: 0,
    explanation: 'Blue-green: old (blue) and new (green) envs; switch 100% traffic to green. Canary: small % of traffic to new version, then increase if healthy.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'deployment', 'canary'],
  },
  {
    id: 'j-k8s-master-odd',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'Why should the number of master (control plane) nodes be odd (e.g. 1, 3, 5)?',
    options: [
      'For etcd quorum: a majority is needed; odd number avoids split and allows one more failure',
      'For load balancing only',
      'It does not matter',
      'To save cost',
    ],
    correctAnswer: 0,
    explanation: 'etcd uses Raft; quorum is (n/2)+1. With 3 nodes, 2 can fail; with 4, only 2 can fail (same as 3). Odd count maximizes fault tolerance per node.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'etcd', 'ha'],
  },
  {
    id: 'j-k8s-affinity-taints-use-case',
    levelId: 'kubernetes',
    difficulty: 'hard',
    question: 'Give a use case for node affinity and for taints/tolerations to schedule a pod on specific nodes.',
    options: [
      'Affinity: "run this pod on GPU nodes"; Taints: "only allow pods that tolerate dedicated=app to run on this node" (e.g. dedicated app node)',
      'Only for labeling',
      'Only for networking',
      'They are the same',
    ],
    correctAnswer: 0,
    explanation: 'Node affinity: prefer or require nodes with certain labels (e.g. GPU, SSD). Taints/tolerations: reserve nodes for specific workloads (e.g. taint dedicated nodes, add toleration only to that workload).',
    wrongFeedback,
    xpReward: 35,
    tags: ['kubernetes', 'scheduling', 'affinity', 'taints'],
  },
  {
    id: 'j-k8s-master-down',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What happens to existing workloads if a master (control plane) node goes down?',
    options: [
      'Existing pods on workers keep running; no new scheduling or API changes until master is back (or another master in HA)',
      'All pods restart',
      'Cluster stops',
      'Workloads move to another master',
    ],
    correctAnswer: 0,
    explanation: 'Worker nodes and kubelet keep running existing pods. Scheduler and API server are on the control plane, so no new pods are scheduled and kubectl may fail until control plane is restored (or another master in HA).',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'ha', 'control-plane'],
  },
  {
    id: 'j-k8s-cordon-drain',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What is the difference between kubectl cordon and kubectl drain?',
    options: [
      'Cordon marks node unschedulable (no new pods); drain also evicts existing pods (respecting PDB) so node can be safely taken down',
      'They are the same',
      'Drain only marks unschedulable',
      'Cordon evicts pods',
    ],
    correctAnswer: 0,
    explanation: 'cordon: node is marked unschedulable. drain: cordon + evict pods (with respect to PDB and graceful termination) so you can maintain the node.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'maintenance', 'cordon', 'drain'],
  },
  {
    id: 'j-k8s-master-no-pods',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'Why do control plane (master) nodes typically not run user workload pods?',
    options: [
      'To reserve resources for control plane components (API server, etcd, scheduler) and avoid impacting cluster control; often enforced by taints',
      'They can run the same as workers',
      'Only for security',
      'Kubernetes does not allow it',
    ],
    correctAnswer: 0,
    explanation: 'Control plane needs stable CPU/memory. User workloads are isolated by tainting master nodes (e.g. node-role.kubernetes.io/control-plane:NoSchedule) unless pods have the matching toleration.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'control-plane', 'scheduling'],
  },
  {
    id: 'j-k8s-pdb',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What is a Pod Disruption Budget (PDB)?',
    options: [
      'Min/max number of available pods (e.g. minAvailable or maxUnavailable) so voluntary disruptions (drain, upgrade) do not take down too many at once',
      'A backup of pod state',
      'A budget for pod cost',
      'Only for daemonsets',
    ],
    correctAnswer: 0,
    explanation: 'PDB limits how many pods of a certain set can be down at once. During drain or node upgrade, the eviction API respects PDB so you do not violate availability.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'pdb', 'ha'],
  },
  {
    id: 'j-k8s-crd-operator',
    levelId: 'kubernetes',
    difficulty: 'hard',
    question: 'What is a CRD and what is an operator?',
    options: [
      'CRD extends the API with custom resources; operator is a controller that manages the lifecycle of those resources (and often real-world state)',
      'CRD is a plugin only',
      'Operator is the same as Deployment',
      'CRD is only for storage',
    ],
    correctAnswer: 0,
    explanation: 'CRD defines custom resource types (e.g. MyApp). An operator is a controller that watches those resources and reconciles state (e.g. create DB, update config).',
    wrongFeedback,
    xpReward: 35,
    tags: ['kubernetes', 'crd', 'operator'],
  },
  {
    id: 'j-k8s-pod-pending',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'A pod is stuck in Pending. How do you troubleshoot?',
    options: [
      'kubectl describe pod: check Events for scheduling failure (e.g. insufficient CPU/memory, no node match, taints, PVC pending)',
      'Only check pod logs',
      'Restart the scheduler',
      'Delete the pod',
    ],
    correctAnswer: 0,
    explanation: 'describe pod shows Events: e.g. 0/x nodes available (insufficient cpu, node affinity, taints), or waiting for PVC. Fix by adding nodes, relaxing requests, or fixing PVC/StorageClass.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'troubleshooting', 'scheduling'],
  },
  {
    id: 'j-k8s-rollout-restart',
    levelId: 'kubernetes',
    difficulty: 'easy',
    question: 'How do you restart a deployment (rolling restart of pods)?',
    options: ['kubectl rollout restart deployment/<name>', 'kubectl restart deployment', 'kubectl delete pods', 'Only by changing the image'],
    correctAnswer: 0,
    explanation: 'kubectl rollout restart deployment/<name> triggers a rolling restart. You can also change a non-changing field (e.g. annotation) to trigger a new rollout.',
    wrongFeedback,
    xpReward: 10,
    tags: ['kubernetes', 'deployment', 'rollout'],
  },
  {
    id: 'j-k8s-helm-vs-kubectl',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What is the difference between Helm and plain kubectl?',
    options: [
      'Helm is a package manager: charts with templating and versioning; kubectl applies raw manifests',
      'They do the same thing',
      'Helm replaces kubectl',
      'kubectl is only for debugging',
    ],
    correctAnswer: 0,
    explanation: 'Helm packages apps as charts (templates + values), supports install/upgrade/rollback. kubectl apply is for static or generated YAML. Helm sits on top of kubectl.',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'helm', 'kubectl'],
  },
  {
    id: 'j-k8s-helm-benefits',
    levelId: 'kubernetes',
    difficulty: 'easy',
    question: 'What are benefits of using Helm?',
    options: [
      'Templating, versioning, easy install/upgrade/rollback, sharing charts (e.g. Helm Hub)',
      'Only faster deploys',
      'Only for production',
      'Replaces Kubernetes',
    ],
    correctAnswer: 0,
    explanation: 'Helm provides parameterized templates (values.yaml), release history, rollback, and a way to share and reuse charts.',
    wrongFeedback,
    xpReward: 10,
    tags: ['kubernetes', 'helm'],
  },
  {
    id: 'j-k8s-helm-hooks',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What are Helm hooks?',
    options: [
      'Lifecycle hooks that run at certain points (e.g. pre-install, post-upgrade) as Jobs or other resources',
      'Webhooks for Helm only',
      'Only for testing',
      'They do not exist',
    ],
    correctAnswer: 0,
    explanation: 'Hooks run at events like pre-install, post-install, pre-delete. They are often Jobs that run before/after install/upgrade/delete (e.g. run migrations).',
    wrongFeedback,
    xpReward: 20,
    tags: ['kubernetes', 'helm', 'hooks'],
  },
  // --- Terraform & IaC ---
  {
    id: 'j-iac-meaning',
    levelId: 'terraform',
    difficulty: 'easy',
    question: 'What does IaC (Infrastructure as Code) mean?',
    options: [
      'Defining and managing infrastructure (servers, networks, etc.) using code and config files, versioned and applied automatically',
      'Writing code inside VMs only',
      'Documentation only',
      'Only for cloud',
    ],
    correctAnswer: 0,
    explanation: 'IaC means infrastructure is defined in code (e.g. Terraform, CloudFormation), versioned, reviewed, and applied consistently instead of manual clicks.',
    wrongFeedback,
    xpReward: 10,
    tags: ['iac', 'terraform', 'concepts'],
  },
  {
    id: 'j-terraform-destroy-all',
    levelId: 'terraform',
    difficulty: 'easy',
    question: 'What Terraform command destroys all resources managed by the current state?',
    options: ['terraform destroy', 'terraform delete', 'terraform remove -all', 'terraform apply -destroy'],
    correctAnswer: 0,
    explanation: 'terraform destroy (or terraform apply -destroy) removes all resources in the state. It may ask for confirmation unless -auto-approve is used.',
    wrongFeedback,
    xpReward: 10,
    tags: ['terraform', 'commands', 'destroy'],
  },
  {
    id: 'j-terraform-import',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'How do you make a resource that was created manually (e.g. in cloud console) managed by Terraform?',
    options: [
      'terraform import <resource_address> <resource_id> to add it to state; then add the matching resource block to your config',
      'Just add the resource in .tf; Terraform will adopt it',
      'Copy the resource ID into state file',
      'You cannot; recreate with Terraform',
    ],
    correctAnswer: 0,
    explanation: 'terraform import associates an existing resource with a state address. You must then add the corresponding resource block in .tf so future applies match reality.',
    wrongFeedback,
    xpReward: 20,
    tags: ['terraform', 'import', 'state'],
  },
  {
    id: 'j-terraform-state',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'What is the Terraform state file used for?',
    options: [
      'Stores mapping of config to real resource IDs and attributes; used by Terraform to plan changes and track what it manages',
      'Only for backup',
      'Only for locking',
      'Optional; Terraform does not need it',
    ],
    correctAnswer: 0,
    explanation: 'State holds resource IDs and metadata so Terraform knows what exists, can compute diffs, and update/destroy the right resources. Remote state + lock allows team use.',
    wrongFeedback,
    xpReward: 20,
    tags: ['terraform', 'state'],
  },
  {
    id: 'j-terraform-count-for-each',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'What is the difference between count and for_each in Terraform?',
    options: [
      'count is for a number of instances (integer); for_each is for a set/map of keys (each key gets one instance)',
      'They are the same',
      'for_each is deprecated',
      'count is only for modules',
    ],
    correctAnswer: 0,
    explanation: 'count = 3 creates 3 instances (index 0,1,2). for_each = toset(["a","b"]) creates instances keyed by "a" and "b", which is stable when adding/removing items.',
    wrongFeedback,
    xpReward: 20,
    tags: ['terraform', 'count', 'for_each'],
  },
  {
    id: 'j-terraform-local-remote-provisioner',
    levelId: 'terraform',
    difficulty: 'hard',
    question: 'What is the difference between local-exec and remote-exec provisioners?',
    options: [
      'local-exec runs a command on the machine running Terraform; remote-exec runs on the resource (e.g. EC2) after creation (SSH or WinRM)',
      'They are the same',
      'remote-exec runs locally',
      'local-exec is deprecated',
    ],
    correctAnswer: 0,
    explanation: 'local-exec: run on Terraform host (e.g. trigger API, write file). remote-exec: run on the created instance (bootstrap, install software). Both are last-resort options; prefer image/config management.',
    wrongFeedback,
    xpReward: 35,
    tags: ['terraform', 'provisioner'],
  },
  {
    id: 'j-terraform-remote-backend',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'How can a team share Terraform state and ensure only one person runs apply at a time?',
    options: [
      'Use a remote backend (e.g. S3 + DynamoDB, Terraform Cloud) with state locking',
      'Commit state to Git',
      'Run Terraform only on one server',
      'There is no way',
    ],
    correctAnswer: 0,
    explanation: 'Remote backend (e.g. S3 + DynamoDB lock, or Terraform Cloud) stores state centrally and locks it during apply so others wait and do not overwrite.',
    wrongFeedback,
    xpReward: 20,
    tags: ['terraform', 'backend', 'locking'],
  },
  // --- CI/CD ---
  {
    id: 'j-cicd-meaning',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What is CI/CD?',
    options: [
      'Continuous Integration (build/test on every change) and Continuous Delivery/Deployment (automate release to staging/production)',
      'Only continuous deployment',
      'Only running tests',
      'Only for containers',
    ],
    correctAnswer: 0,
    explanation: 'CI: integrate code frequently, run builds and tests. CD: deliver/deploy automatically (e.g. to staging, then production) with pipelines and approvals.',
    wrongFeedback,
    xpReward: 10,
    tags: ['cicd', 'concepts'],
  },
  {
    id: 'j-cicd-pipeline-jobs',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'Describe a typical pipeline you have built and what jobs/stages it had.',
    options: [
      'Example: build → test (unit/lint) → build image → push to registry → deploy to staging (e.g. kubectl/Helm) → optional manual approval → deploy to prod',
      'Only build and deploy',
      'Only test',
      'Pipelines do not have stages',
    ],
    correctAnswer: 0,
    explanation: 'Common pattern: checkout → install deps → lint → unit tests → build artifact/image → push → deploy to staging → smoke tests → (approval) → deploy to prod.',
    wrongFeedback,
    xpReward: 20,
    tags: ['cicd', 'pipeline', 'jobs'],
  },
  {
    id: 'j-cicd-speed',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'How can you make a CI/CD pipeline faster?',
    options: [
      'Cache dependencies, parallelize jobs, smaller images, incremental builds, skip unchanged paths, use faster runners',
      'Only use more powerful runners',
      'Skip tests',
      'Run everything in one job',
    ],
    correctAnswer: 0,
    explanation: 'Cache (deps, layers), run independent jobs in parallel, use smaller base images and multi-stage builds, only build/test what changed, and optimize runner size/location.',
    wrongFeedback,
    xpReward: 20,
    tags: ['cicd', 'optimization', 'speed'],
  },
  // --- Ansible ---
  {
    id: 'j-ansible-what',
    levelId: 'ansible',
    difficulty: 'easy',
    question: 'What do you know about Ansible?',
    options: [
      'Agentless config management and automation using YAML playbooks; uses SSH; idempotent tasks; modules for packages, files, services, etc.',
      'Only for cloud provisioning',
      'Only for containers',
      'Uses agents on every host',
    ],
    correctAnswer: 0,
    explanation: 'Ansible is agentless: it uses SSH (or WinRM) to run modules on targets. Playbooks are YAML; tasks are usually idempotent. Used for config management, app deploy, and ad-hoc automation.',
    wrongFeedback,
    xpReward: 10,
    tags: ['ansible', 'concepts'],
  },
  {
    id: 'j-ansible-role',
    levelId: 'ansible',
    difficulty: 'medium',
    question: 'What is an Ansible role?',
    options: [
      'Reusable unit of tasks, vars, handlers, files, templates (directory structure: tasks/, defaults/, etc.) that can be included in playbooks',
      'Only a group of tasks',
      'Only for variables',
      'Same as a playbook',
    ],
    correctAnswer: 0,
    explanation: 'A role is a structured way to package playbook content: tasks/, handlers/, defaults/, vars/, files/, templates/, meta/. Playbooks include roles with roles: or import_role.',
    wrongFeedback,
    xpReward: 20,
    tags: ['ansible', 'roles', 'structure'],
  },
];
