import { Question } from '@/types/game';

export const kubernetesQuestions: Question[] = [
  {
    id: 'k8s-001',
    levelId: 'kubernetes',
    difficulty: 'easy',
    question: 'What is the smallest deployable unit in Kubernetes?',
    options: ['Container', 'Pod', 'Node', 'Deployment'],
    correctAnswer: 1,
    explanation: 'A Pod is the smallest deployable unit in Kubernetes. It can contain one or more containers that share storage and network.',
    wrongFeedback: ['Containers run inside pods!', 'Correct! Pods are the atomic unit.', 'Nodes run pods, not the other way around.', 'Deployments manage pods.'],
    xpReward: 10,
    tags: ['pods', 'basics'],
  },
  {
    id: 'k8s-002',
    levelId: 'kubernetes',
    difficulty: 'easy',
    question: 'Which command lists all pods in all namespaces?',
    options: ['kubectl get pods', 'kubectl get pods --all-namespaces', 'kubectl list pods', 'kubectl pods --all'],
    correctAnswer: 1,
    explanation: 'kubectl get pods --all-namespaces (or -A) shows pods across all namespaces.',
    wrongFeedback: ['This only shows default namespace.', 'Correct! Or use -A for short.', 'list is not a kubectl command.', 'Invalid syntax.'],
    xpReward: 10,
    tags: ['kubectl', 'basics'],
  },
  {
    id: 'k8s-003',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What does a ReplicaSet ensure?',
    options: ['Containers restart on failure', 'A specified number of pod replicas are running', 'Pods are distributed across nodes', 'Services are load balanced'],
    correctAnswer: 1,
    explanation: 'A ReplicaSet maintains a stable set of replica Pods running at any given time.',
    wrongFeedback: ['That\'s the kubelet\'s job.', 'Correct! ReplicaSets maintain desired replica count.', 'That\'s the scheduler\'s job.', 'Services handle load balancing.'],
    xpReward: 20,
    tags: ['replicaset', 'controllers'],
  },
  {
    id: 'k8s-004',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'Which resource type exposes a Deployment to external traffic?',
    options: ['ConfigMap', 'Secret', 'Service', 'PersistentVolume'],
    correctAnswer: 2,
    explanation: 'Services expose Deployments to network traffic, either internally or externally via LoadBalancer or NodePort types.',
    wrongFeedback: ['ConfigMaps store configuration.', 'Secrets store sensitive data.', 'Correct! Services expose applications.', 'PVs handle storage.'],
    xpReward: 20,
    tags: ['services', 'networking'],
  },
  {
    id: 'k8s-005',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What is the purpose of a Kubernetes namespace?',
    options: ['To isolate container processes', 'To provide virtual clusters within a physical cluster', 'To encrypt network traffic', 'To manage container images'],
    correctAnswer: 1,
    explanation: 'Namespaces provide a mechanism for isolating groups of resources within a single cluster.',
    wrongFeedback: ['That\'s container isolation.', 'Correct! Namespaces create virtual clusters.', 'NetworkPolicies handle that.', 'That\'s registry\'s job.'],
    xpReward: 20,
    tags: ['namespaces', 'organization'],
  },
  {
    id: 'k8s-006',
    levelId: 'kubernetes',
    difficulty: 'hard',
    question: 'In a Deployment spec, what does "strategy.type: RollingUpdate" with "maxSurge: 1" mean?',
    options: ['Only one pod can fail at a time', 'One extra pod can be created during updates', 'Updates happen one node at a time', 'Maximum one replica allowed'],
    correctAnswer: 1,
    explanation: 'maxSurge specifies the maximum number of pods that can be created over the desired number during an update.',
    wrongFeedback: ['That\'s maxUnavailable.', 'Correct! maxSurge allows temporary extra pods.', 'Not related to nodes.', 'That\'s replicas field.'],
    xpReward: 35,
    tags: ['deployments', 'rolling-update'],
  },
  {
    id: 'k8s-007',
    levelId: 'kubernetes',
    difficulty: 'hard',
    question: 'What happens when a Pod exceeds its memory limit?',
    options: ['It\'s throttled', 'It\'s OOMKilled', 'It\'s evicted gracefully', 'Nothing, limits are soft'],
    correctAnswer: 1,
    explanation: 'When a container exceeds its memory limit, it is terminated with OOMKilled status.',
    wrongFeedback: ['CPU is throttled, not memory.', 'Correct! OOMKilled terminates the container.', 'That\'s for resource pressure.', 'Limits are enforced.'],
    xpReward: 35,
    tags: ['resources', 'limits'],
  },
  {
    id: 'k8s-008',
    levelId: 'kubernetes',
    difficulty: 'hard',
    question: 'Which component schedules pods to nodes?',
    options: ['kubelet', 'kube-proxy', 'kube-scheduler', 'etcd'],
    correctAnswer: 2,
    explanation: 'The kube-scheduler watches for newly created Pods and assigns them to nodes.',
    wrongFeedback: ['Kubelet runs pods on nodes.', 'Kube-proxy handles networking.', 'Correct! Scheduler assigns pods.', 'etcd stores cluster state.'],
    xpReward: 35,
    tags: ['architecture', 'control-plane'],
  },
  {
    id: 'k8s-009',
    levelId: 'kubernetes',
    difficulty: 'evil',
    question: 'A pod is stuck in "Pending" with event "0/3 nodes are available: 3 Insufficient cpu". What\'s the fix?',
    code: 'resources:\n  requests:\n    cpu: "4"\n    memory: "8Gi"',
    options: ['Add more nodes or reduce CPU request', 'Increase node CPU limits', 'Delete and recreate the pod', 'Set CPU limit instead of request'],
    correctAnswer: 0,
    explanation: 'The pod requests more CPU than any node can provide. Either add nodes or reduce the CPU request.',
    wrongFeedback: ['Correct! Scale cluster or reduce requests.', 'Nodes don\'t have CPU limits.', 'Won\'t help if no resources available.', 'Limits don\'t affect scheduling.'],
    xpReward: 50,
    tags: ['troubleshooting', 'scheduling'],
  },
  {
    id: 'k8s-010',
    levelId: 'kubernetes',
    difficulty: 'evil',
    question: 'Your StatefulSet pods are not being created. The PVC is stuck in Pending. What\'s likely wrong?',
    options: ['StatefulSet name is too long', 'No StorageClass is set as default', 'Pod security policy blocking', 'Service not created first'],
    correctAnswer: 1,
    explanation: 'StatefulSets need a StorageClass to dynamically provision PVs. Without a default, PVCs stay Pending.',
    wrongFeedback: ['Name length isn\'t the issue.', 'Correct! Set default StorageClass or specify one.', 'PSP wouldn\'t affect PVC.', 'Service isn\'t required for PVC.'],
    xpReward: 50,
    tags: ['statefulset', 'storage', 'troubleshooting'],
  },
  {
    id: 'k8s-011',
    levelId: 'kubernetes',
    difficulty: 'easy',
    question: 'What does kubectl apply -f manifest.yaml do?',
    options: ['Deletes resources in manifest', 'Creates or updates resources declaratively', 'Validates manifest syntax only', 'Runs manifest as a job'],
    correctAnswer: 1,
    explanation: 'kubectl apply creates resources if they don\'t exist, or updates them if they do, based on the manifest.',
    wrongFeedback: ['That\'s kubectl delete.', 'Correct! Apply is declarative.', 'That\'s --dry-run.', 'Jobs need Job kind.'],
    xpReward: 10,
    tags: ['kubectl', 'basics'],
  },
  {
    id: 'k8s-012',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'What is an Ingress resource used for?',
    options: ['Internal pod communication', 'HTTP/HTTPS routing to services', 'Pod-to-pod encryption', 'Container orchestration'],
    correctAnswer: 1,
    explanation: 'Ingress manages external access to services, typically HTTP, providing load balancing, SSL, and name-based virtual hosting.',
    wrongFeedback: ['Services handle internal comms.', 'Correct! Ingress routes HTTP traffic.', 'That\'s service mesh territory.', 'That\'s K8s itself.'],
    xpReward: 20,
    tags: ['ingress', 'networking'],
  },
  {
    id: 'k8s-013',
    levelId: 'kubernetes',
    difficulty: 'hard',
    question: 'What is the purpose of a PodDisruptionBudget?',
    options: ['Limit pod resource usage', 'Ensure minimum available pods during disruptions', 'Prevent pod scheduling', 'Monitor pod health'],
    correctAnswer: 1,
    explanation: 'PDBs limit voluntary disruptions to ensure a minimum number of pods stay available during maintenance.',
    wrongFeedback: ['ResourceQuotas do that.', 'Correct! PDBs protect availability.', 'Taints do that.', 'Probes monitor health.'],
    xpReward: 35,
    tags: ['pdb', 'availability'],
  },
  {
    id: 'k8s-014',
    levelId: 'kubernetes',
    difficulty: 'evil',
    question: 'Pods can reach external services but not each other. NetworkPolicy exists. What\'s wrong?',
    code: 'apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nspec:\n  podSelector: {}\n  policyTypes:\n  - Ingress',
    options: ['Missing egress policy', 'Empty podSelector blocks all', 'NetworkPolicy needs namespace', 'CNI plugin not installed'],
    correctAnswer: 1,
    explanation: 'An empty podSelector {} selects all pods. With only Ingress type and no ingress rules, all incoming traffic is denied.',
    wrongFeedback: ['Egress isn\'t the issue here.', 'Correct! No ingress rules = deny all ingress.', 'Namespace is implicit.', 'Pods reach external, so CNI works.'],
    xpReward: 50,
    tags: ['networkpolicy', 'troubleshooting'],
  },
  {
    id: 'k8s-015',
    levelId: 'kubernetes',
    difficulty: 'medium',
    question: 'How do you get logs from a crashed pod\'s previous container?',
    options: ['kubectl logs pod-name --crashed', 'kubectl logs pod-name --previous', 'kubectl describe pod pod-name', 'kubectl get events'],
    correctAnswer: 1,
    explanation: 'The --previous flag shows logs from the previous instance of a container, useful for crash debugging.',
    wrongFeedback: ['Not a valid flag.', 'Correct! --previous shows old logs.', 'Describe shows events, not logs.', 'Events don\'t show container logs.'],
    xpReward: 20,
    tags: ['kubectl', 'debugging'],
  },
  {
    id: 'k8s-boss',
    levelId: 'kubernetes',
    difficulty: 'evil',
    question: 'üèÜ BOSS BATTLE: Your production cluster is experiencing cascading failures. Pods are evicted, services are unreachable. What\'s your first diagnostic command?',
    options: ['kubectl get pods -A', 'kubectl top nodes', 'kubectl get events --sort-by=.metadata.creationTimestamp', 'kubectl describe nodes'],
    correctAnswer: 2,
    explanation: 'Getting sorted events shows you the timeline of what happened, crucial for understanding cascading failures.',
    wrongFeedback: ['Too basic for diagnosis.', 'Shows current state, not history.', 'Correct! Events show the failure timeline.', 'Useful but events are faster.'],
    xpReward: 100,
    tags: ['boss', 'troubleshooting', 'production'],
    isBoss: true,
  },
];
