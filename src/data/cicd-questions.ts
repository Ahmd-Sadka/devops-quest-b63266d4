import { Question } from '@/types/game';

export const cicdQuestions: Question[] = [
  {
    id: 'cicd-001',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What does CI stand for in CI/CD?',
    options: ['Container Integration', 'Continuous Integration', 'Code Inspection', 'Cloud Infrastructure'],
    correctAnswer: 1,
    explanation: 'CI (Continuous Integration) is the practice of frequently merging code changes into a shared repository.',
    wrongFeedback: ['Not related to containers.', 'Correct! Continuous Integration.', 'That\'s part of it.', 'Different concept.'],
    xpReward: 10,
    tags: ['basics', 'ci'],
  },
  {
    id: 'cicd-002',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What is the purpose of CD (Continuous Deployment)?',
    options: ['Code review automation', 'Automatically deploy every change to production', 'Container distribution', 'Cloud documentation'],
    correctAnswer: 1,
    explanation: 'Continuous Deployment automatically releases every change that passes all stages to production.',
    wrongFeedback: ['That\'s part of CI.', 'Correct! Auto-deploy to production.', 'Different concept.', 'Not CD.'],
    xpReward: 10,
    tags: ['basics', 'cd'],
  },
  {
    id: 'cicd-003',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'In GitHub Actions, what triggers a workflow?',
    options: ['workflow_dispatch only', 'Events like push, pull_request, schedule', 'Manual approval only', 'Cron jobs only'],
    correctAnswer: 1,
    explanation: 'GitHub Actions workflows are triggered by events like push, pull_request, schedule, workflow_dispatch, and more.',
    wrongFeedback: ['One of many triggers.', 'Correct! Multiple event types.', 'Events can auto-trigger.', 'Schedule is one option.'],
    xpReward: 20,
    tags: ['github-actions', 'triggers'],
  },
  {
    id: 'cicd-004',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is a "stage" in a CI/CD pipeline?',
    options: ['A Git branch', 'A logical group of jobs that run in sequence', 'A deployment environment', 'A test file'],
    correctAnswer: 1,
    explanation: 'Stages are logical divisions (build, test, deploy) that contain jobs and typically run sequentially.',
    wrongFeedback: ['Branches are separate.', 'Correct! Stages group jobs.', 'Environments are different.', 'Tests are in stages.'],
    xpReward: 20,
    tags: ['pipelines', 'structure'],
  },
  {
    id: 'cicd-005',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is the purpose of artifact caching in CI/CD?',
    options: ['Store secrets securely', 'Speed up builds by reusing dependencies', 'Backup production data', 'Version control builds'],
    correctAnswer: 1,
    explanation: 'Caching stores dependencies between runs to avoid re-downloading, significantly speeding up pipelines.',
    wrongFeedback: ['Secrets are separate.', 'Correct! Caching speeds up builds.', 'Not for production data.', 'Artifacts do that.'],
    xpReward: 20,
    tags: ['caching', 'optimization'],
  },
  {
    id: 'cicd-006',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'In GitHub Actions, what does "needs: [build]" mean in a job definition?',
    options: ['Job requires build environment', 'Job depends on build job completing first', 'Job needs build tools installed', 'Job creates build artifacts'],
    correctAnswer: 1,
    explanation: 'The "needs" keyword specifies job dependencies. The job won\'t run until the specified jobs complete successfully.',
    wrongFeedback: ['Environment is separate.', 'Correct! Defines job dependency.', 'Uses runs-on for that.', 'Uses upload-artifact.'],
    xpReward: 35,
    tags: ['github-actions', 'dependencies'],
  },
  {
    id: 'cicd-007',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is "blue-green deployment"?',
    options: ['Deploying to two cloud providers', 'Running two identical environments, switching traffic between them', 'Color-coded logging', 'Testing in development before staging'],
    correctAnswer: 1,
    explanation: 'Blue-green deployment maintains two identical environments. Traffic switches from blue to green for zero-downtime releases.',
    wrongFeedback: ['Not about providers.', 'Correct! Two environments, traffic switch.', 'Not about colors.', 'That\'s staging.'],
    xpReward: 35,
    tags: ['deployment-strategies', 'zero-downtime'],
  },
  {
    id: 'cicd-008',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is a "canary deployment"?',
    options: ['Deploying only to test servers', 'Gradually rolling out to a subset of users first', 'Emergency rollback procedure', 'Pre-production testing'],
    correctAnswer: 1,
    explanation: 'Canary deployments release to a small percentage of users first, monitoring before full rollout.',
    wrongFeedback: ['That\'s staging.', 'Correct! Gradual rollout.', 'That\'s rollback.', 'Canary is in production.'],
    xpReward: 35,
    tags: ['deployment-strategies', 'canary'],
  },
  {
    id: 'cicd-009',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'Pipeline fails with "Resource not accessible by integration". GitHub Actions is trying to comment on PR. What\'s wrong?',
    code: 'on: pull_request\njobs:\n  comment:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/github-script@v6\n        with:\n          script: |\n            github.rest.issues.createComment(...)',
    options: ['Missing GITHUB_TOKEN', 'Need permissions: issues: write', 'Fork PRs can\'t comment', 'Wrong event trigger'],
    correctAnswer: 1,
    explanation: 'GitHub Actions requires explicit permissions. Add "permissions: issues: write" for commenting.',
    wrongFeedback: ['Token is automatic.', 'Correct! Need explicit permissions.', 'Forks can with permissions.', 'pull_request is correct.'],
    xpReward: 50,
    tags: ['github-actions', 'permissions', 'troubleshooting'],
  },
  {
    id: 'cicd-010',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'Jenkins pipeline randomly fails with "workspace locked". Multiple PRs building same branch. Solution?',
    options: ['Use sequential execution', 'Use unique workspace per build with ws()', 'Increase executor count', 'Disable concurrent builds'],
    correctAnswer: 1,
    explanation: 'Use ws() to create unique workspaces, or configure "Throttle Concurrent Builds" with unique workspaces.',
    wrongFeedback: ['Slows everything down.', 'Correct! Unique workspaces per build.', 'Won\'t fix locking.', 'Not always desirable.'],
    xpReward: 50,
    tags: ['jenkins', 'troubleshooting', 'concurrency'],
  },
  {
    id: 'cicd-011',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What file defines a GitHub Actions workflow?',
    options: ['.github/workflows/*.yml', 'Jenkinsfile', '.gitlab-ci.yml', 'pipeline.yaml'],
    correctAnswer: 0,
    explanation: 'GitHub Actions workflows are defined in YAML files under .github/workflows/ directory.',
    wrongFeedback: ['Correct! .github/workflows/.', 'That\'s Jenkins.', 'That\'s GitLab CI.', 'Not the convention.'],
    xpReward: 10,
    tags: ['github-actions', 'basics'],
  },
  {
    id: 'cicd-012',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is the purpose of a "webhook" in CI/CD?',
    options: ['Web-based IDE', 'HTTP callback to trigger pipelines on events', 'Hook into web servers', 'Web scraping tool'],
    correctAnswer: 1,
    explanation: 'Webhooks are HTTP callbacks that notify CI/CD systems when events occur (push, PR, etc.).',
    wrongFeedback: ['Not an IDE.', 'Correct! HTTP callbacks trigger pipelines.', 'Not server hooks.', 'Not for scraping.'],
    xpReward: 20,
    tags: ['webhooks', 'triggers'],
  },
  {
    id: 'cicd-013',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is "GitOps"?',
    options: ['Git operations automation', 'Using Git as single source of truth for infrastructure', 'GitHub premium features', 'Git conflict resolution'],
    correctAnswer: 1,
    explanation: 'GitOps uses Git repositories as the source of truth for declarative infrastructure and applications.',
    wrongFeedback: ['More than just automation.', 'Correct! Git as source of truth.', 'Not a product.', 'Different concept.'],
    xpReward: 35,
    tags: ['gitops', 'infrastructure'],
  },
  {
    id: 'cicd-014',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'Your pipeline takes 45 minutes. Tests pass locally in 5 minutes. What optimizations should you try first?',
    options: ['Buy faster runners', 'Parallelize tests and add dependency caching', 'Skip tests in CI', 'Reduce test coverage'],
    correctAnswer: 1,
    explanation: 'Parallelize test execution across multiple jobs and cache dependencies (node_modules, etc.) between runs.',
    wrongFeedback: ['Expensive solution.', 'Correct! Parallelization and caching.', 'Never skip tests.', 'Never reduce coverage.'],
    xpReward: 50,
    tags: ['optimization', 'performance'],
  },
  {
    id: 'cicd-boss',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'üèÜ BOSS BATTLE: Production deployment failed, half the pods have new code, half have old. Users seeing inconsistent behavior. What\'s your immediate action?',
    options: ['Complete the rollout forward', 'Immediately rollback to previous version', 'Scale down to one pod', 'Enable maintenance mode and investigate'],
    correctAnswer: 1,
    explanation: 'Rollback immediately to restore consistency. A half-deployed state causes unpredictable behavior. Investigate after stability.',
    wrongFeedback: ['Risky if deploy is broken.', 'Correct! Rollback first, investigate later.', 'Won\'t fix the issue.', 'Rollback is faster.'],
    xpReward: 100,
    tags: ['boss', 'incident-response', 'rollback'],
    isBoss: true,
  },
];
