import { Question } from '@/types/game';

export const cicdQuestions: Question[] = [
  {
    id: 'cicd-001',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What does CI stand for in CI/CD?',
    options: ['Container Integration', 'Continuous Integration', 'Code Inspection', 'Cloud Infrastructure'],
    correctAnswer: 1,
    explanation: 'CI (Continuous Integration) is the practice of frequently merging code changes into a shared repository.',
    wrongFeedback: ['Not related to containers.', 'Correct! Continuous Integration.', 'That\'s part of it.', 'Different concept.'],
    xpReward: 10,
    tags: ['basics', 'ci'],
  },
  {
    id: 'cicd-002',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What is the purpose of CD (Continuous Deployment)?',
    options: ['Code review automation', 'Auto-deploy to production', 'Container distribution', 'Cloud documentation'],
    correctAnswer: 1,
    explanation: 'Continuous Deployment automatically releases every change that passes all stages to production.',
    wrongFeedback: ['That\'s part of CI.', 'Correct! Auto-deploy to production.', 'Different concept.', 'Not CD.'],
    xpReward: 10,
    tags: ['basics', 'cd'],
  },
  {
    id: 'cicd-003',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'In GitHub Actions, what triggers a workflow?',
    options: ['workflow_dispatch only', 'Events like push or PR', 'Manual approval only', 'Cron schedules only'],
    correctAnswer: 1,
    explanation: 'GitHub Actions workflows are triggered by events like push, pull_request, schedule, workflow_dispatch, and more.',
    wrongFeedback: ['One of many triggers.', 'Correct! Multiple event types.', 'Events can auto-trigger.', 'Schedule is one option.'],
    xpReward: 20,
    tags: ['github-actions', 'triggers'],
  },
  {
    id: 'cicd-004',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is a "stage" in a CI/CD pipeline?',
    options: ['A Git branch name', 'Logical group of jobs', 'Deployment environment', 'A test file type'],
    correctAnswer: 1,
    explanation: 'Stages are logical divisions (build, test, deploy) that contain jobs and typically run sequentially.',
    wrongFeedback: ['Branches are separate.', 'Correct! Stages group jobs.', 'Environments are different.', 'Tests are in stages.'],
    xpReward: 20,
    tags: ['pipelines', 'structure'],
  },
  {
    id: 'cicd-005',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is artifact caching for in CI/CD?',
    options: ['Store secrets securely', 'Speed builds with cache', 'Backup production data', 'Version control builds'],
    correctAnswer: 1,
    explanation: 'Caching stores dependencies between runs to avoid re-downloading, significantly speeding up pipelines.',
    wrongFeedback: ['Secrets are separate.', 'Correct! Caching speeds up builds.', 'Not for production data.', 'Artifacts do that.'],
    xpReward: 20,
    tags: ['caching', 'optimization'],
  },
  {
    id: 'cicd-006',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'In GitHub Actions, what does "needs: [build]" mean?',
    options: ['Needs build environment', 'Depends on build job', 'Needs build tools', 'Creates build artifacts'],
    correctAnswer: 1,
    explanation: 'The "needs" keyword specifies job dependencies. The job won\'t run until the specified jobs complete successfully.',
    wrongFeedback: ['Environment is separate.', 'Correct! Defines job dependency.', 'Uses runs-on for that.', 'Uses upload-artifact.'],
    xpReward: 35,
    tags: ['github-actions', 'dependencies'],
  },
  {
    id: 'cicd-007',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is "blue-green deployment"?',
    options: ['Deploy to two clouds', 'Two envs, switch traffic', 'Color-coded logging', 'Dev before staging'],
    correctAnswer: 1,
    explanation: 'Blue-green deployment maintains two identical environments. Traffic switches from blue to green for zero-downtime releases.',
    wrongFeedback: ['Not about providers.', 'Correct! Two environments, traffic switch.', 'Not about colors.', 'That\'s staging.'],
    xpReward: 35,
    tags: ['deployment-strategies', 'zero-downtime'],
  },
  {
    id: 'cicd-008',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is a "canary deployment"?',
    options: ['Deploy to test servers', 'Gradual rollout to subset', 'Emergency rollback plan', 'Pre-production testing'],
    correctAnswer: 1,
    explanation: 'Canary deployments release to a small percentage of users first, monitoring before full rollout.',
    wrongFeedback: ['That\'s staging.', 'Correct! Gradual rollout.', 'That\'s rollback.', 'Canary is in production.'],
    xpReward: 35,
    tags: ['deployment-strategies', 'canary'],
  },
  {
    id: 'cicd-009',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'Pipeline fails: "Resource not accessible by integration". PR comment. Issue?',
    code: 'on: pull_request\njobs:\n  comment:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/github-script@v6\n        with:\n          script: |\n            github.rest.issues.createComment(...)',
    options: ['Missing GITHUB_TOKEN', 'Need permissions: write', 'Fork PRs can\'t comment', 'Wrong event trigger'],
    correctAnswer: 1,
    explanation: 'GitHub Actions requires explicit permissions. Add "permissions: issues: write" for commenting.',
    wrongFeedback: ['Token is automatic.', 'Correct! Need explicit permissions.', 'Forks can with permissions.', 'pull_request is correct.'],
    xpReward: 50,
    tags: ['github-actions', 'permissions', 'troubleshooting'],
  },
  {
    id: 'cicd-010',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'Jenkins fails: "workspace locked". Multiple PRs same branch. Fix?',
    options: ['Use sequential execution', 'Use unique workspace ws()', 'Increase executor count', 'Disable concurrent builds'],
    correctAnswer: 1,
    explanation: 'Use ws() to create unique workspaces, or configure "Throttle Concurrent Builds" with unique workspaces.',
    wrongFeedback: ['Slows everything down.', 'Correct! Unique workspaces per build.', 'Won\'t fix locking.', 'Not always desirable.'],
    xpReward: 50,
    tags: ['jenkins', 'troubleshooting', 'concurrency'],
  },
  {
    id: 'cicd-011',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What file defines a GitHub Actions workflow?',
    options: ['.github/workflows/*.yml', 'Jenkinsfile', '.gitlab-ci.yml', 'pipeline.yaml'],
    correctAnswer: 0,
    explanation: 'GitHub Actions workflows are defined in YAML files under .github/workflows/ directory.',
    wrongFeedback: ['Correct! .github/workflows/.', 'That\'s Jenkins.', 'That\'s GitLab CI.', 'Not the convention.'],
    xpReward: 10,
    tags: ['github-actions', 'basics'],
  },
  {
    id: 'cicd-012',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is a "webhook" in CI/CD context?',
    options: ['Web-based IDE tool', 'HTTP callback trigger', 'Hook into web server', 'Web scraping tool'],
    correctAnswer: 1,
    explanation: 'Webhooks are HTTP callbacks that notify CI/CD systems when events occur (push, PR, etc.).',
    wrongFeedback: ['Not an IDE.', 'Correct! HTTP callbacks trigger pipelines.', 'Not server hooks.', 'Not for scraping.'],
    xpReward: 20,
    tags: ['webhooks', 'triggers'],
  },
  {
    id: 'cicd-013',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is "GitOps" methodology?',
    options: ['Git operations automation', 'Git as source of truth', 'GitHub premium features', 'Git conflict resolution'],
    correctAnswer: 1,
    explanation: 'GitOps uses Git repositories as the source of truth for declarative infrastructure and applications.',
    wrongFeedback: ['More than just automation.', 'Correct! Git as source of truth.', 'Not a product.', 'Different concept.'],
    xpReward: 35,
    tags: ['gitops', 'infrastructure'],
  },
  {
    id: 'cicd-014',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'Pipeline takes 45min. Tests pass locally in 5min. First optimization?',
    options: ['Buy faster runners', 'Parallelize and cache deps', 'Skip tests in CI', 'Reduce test coverage'],
    correctAnswer: 1,
    explanation: 'Parallelize test execution across multiple jobs and cache dependencies (node_modules, etc.) between runs.',
    wrongFeedback: ['Expensive solution.', 'Correct! Parallelization and caching.', 'Never skip tests.', 'Never reduce coverage.'],
    xpReward: 50,
    tags: ['optimization', 'performance'],
  },
  {
    id: 'cicd-015',
    levelId: 'cicd',
    difficulty: 'easy',
    question: 'What is the purpose of a Jenkinsfile?',
    options: ['Store Jenkins secrets', 'Define pipeline as code', 'Configure Jenkins server', 'Log Jenkins builds'],
    correctAnswer: 1,
    explanation: 'A Jenkinsfile defines the entire pipeline as code, stored in version control with your project.',
    wrongFeedback: ['Credentials plugin.', 'Correct! Pipeline as code.', 'Jenkins config is separate.', 'Logs are elsewhere.'],
    xpReward: 10,
    tags: ['jenkins', 'basics'],
  },
  {
    id: 'cicd-016',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is "shift-left" in CI/CD?',
    options: ['Move code left', 'Test earlier in pipeline', 'Deploy to staging', 'Roll back changes'],
    correctAnswer: 1,
    explanation: 'Shift-left means moving testing and quality checks earlier in the development cycle to catch issues sooner.',
    wrongFeedback: ['Not about code location.', 'Correct! Test earlier.', 'That\'s deployment.', 'That\'s rollback.'],
    xpReward: 20,
    tags: ['best-practices', 'testing'],
  },
  {
    id: 'cicd-017',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is a "matrix build" in GitHub Actions?',
    options: ['Build visualization', 'Test across combinations', 'Parallel same build', 'Sequential builds'],
    correctAnswer: 1,
    explanation: 'Matrix builds run jobs across multiple combinations of variables (OS, language versions, etc.).',
    wrongFeedback: ['Not visualization.', 'Correct! Multiple combinations.', 'That\'s parallelization.', 'Matrix is parallel.'],
    xpReward: 35,
    tags: ['github-actions', 'matrix'],
  },
  {
    id: 'cicd-018',
    levelId: 'cicd',
    difficulty: 'medium',
    question: 'What is "trunk-based development"?',
    options: ['Long-lived branches', 'Short-lived feature branches', 'No branches at all', 'One branch per env'],
    correctAnswer: 1,
    explanation: 'Trunk-based development uses short-lived feature branches that merge frequently to main/trunk.',
    wrongFeedback: ['Opposite of trunk-based.', 'Correct! Short-lived branches.', 'Still uses branches.', 'Different strategy.'],
    xpReward: 20,
    tags: ['branching', 'workflow'],
  },
  {
    id: 'cicd-019',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'Deployment succeeds but app crashes in prod. All tests passed. Issue?',
    options: ['Tests are flaky', 'Missing integration tests', 'Wrong test framework', 'CI cache is stale'],
    correctAnswer: 1,
    explanation: 'Unit tests pass but app fails in prod often means missing integration/E2E tests with real dependencies.',
    wrongFeedback: ['Flaky tests would fail sometimes.', 'Correct! Need integration tests.', 'Framework doesn\'t matter.', 'Cache doesn\'t affect tests.'],
    xpReward: 50,
    tags: ['testing', 'troubleshooting'],
  },
  {
    id: 'cicd-020',
    levelId: 'cicd',
    difficulty: 'hard',
    question: 'What is a "feature flag" used for?',
    options: ['Mark code as complete', 'Toggle features at runtime', 'Flag security issues', 'Prioritize features'],
    correctAnswer: 1,
    explanation: 'Feature flags allow toggling functionality on/off without deploying code, enabling gradual rollouts.',
    wrongFeedback: ['Not for completion.', 'Correct! Runtime toggle.', 'Security scanners do that.', 'Product management.'],
    xpReward: 35,
    tags: ['feature-flags', 'deployment'],
  },
  {
    id: 'cicd-boss',
    levelId: 'cicd',
    difficulty: 'evil',
    question: 'üèÜ BOSS: Deploy failed, half pods new code, half old. Users see inconsistency. Action?',
    options: ['Complete the rollout', 'Immediately rollback', 'Scale down to one pod', 'Maintenance mode first'],
    correctAnswer: 1,
    explanation: 'Rollback immediately to restore consistency. A half-deployed state causes unpredictable behavior. Investigate after stability.',
    wrongFeedback: ['Risky if deploy is broken.', 'Correct! Rollback first, investigate later.', 'Won\'t fix the issue.', 'Rollback is faster.'],
    xpReward: 100,
    tags: ['boss', 'incident-response', 'rollback'],
    isBoss: true,
  },
];
