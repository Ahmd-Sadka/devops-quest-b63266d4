import { Question } from '@/types/game';

export const terraformQuestions: Question[] = [
  {
    id: 'tf-001',
    levelId: 'terraform',
    difficulty: 'easy',
    question: 'What command initializes a Terraform directory?',
    options: ['terraform start', 'terraform init', 'terraform begin', 'terraform setup'],
    correctAnswer: 1,
    explanation: 'terraform init initializes a working directory containing Terraform configuration files.',
    wrongFeedback: ['Not a Terraform command.', 'Correct! init downloads providers and modules.', 'Not valid.', 'Not a command.'],
    xpReward: 10,
    tags: ['basics', 'commands'],
  },
  {
    id: 'tf-002',
    levelId: 'terraform',
    difficulty: 'easy',
    question: 'What file extension do Terraform configs use?',
    options: ['.yaml', '.tf', '.hcl', '.json'],
    correctAnswer: 1,
    explanation: 'Terraform uses .tf files written in HCL (HashiCorp Configuration Language), though .tf.json is also valid.',
    wrongFeedback: ['YAML is for Kubernetes.', 'Correct! .tf is standard.', 'HCL is the language, not extension.', 'JSON is supported but not standard.'],
    xpReward: 10,
    tags: ['basics', 'syntax'],
  },
  {
    id: 'tf-003',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'What does terraform plan do?',
    options: ['Applies changes immediately', 'Shows execution plan only', 'Destroys all resources', 'Validates syntax only'],
    correctAnswer: 1,
    explanation: 'terraform plan creates an execution plan, showing what actions Terraform will take without making changes.',
    wrongFeedback: ['That\'s terraform apply.', 'Correct! Plan previews changes.', 'That\'s terraform destroy.', 'That\'s terraform validate.'],
    xpReward: 20,
    tags: ['commands', 'workflow'],
  },
  {
    id: 'tf-004',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'Where does Terraform store state by default?',
    options: ['In remote S3 bucket', 'In local tfstate file', 'In HashiCorp Cloud', 'In .terraform folder'],
    correctAnswer: 1,
    explanation: 'By default, Terraform stores state in a local file named terraform.tfstate.',
    wrongFeedback: ['That\'s a remote backend option.', 'Correct! Local state file by default.', 'Cloud is optional.', '.terraform stores providers.'],
    xpReward: 20,
    tags: ['state', 'basics'],
  },
  {
    id: 'tf-005',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'What is the purpose of a Terraform provider?',
    options: ['To store variables', 'To interact with APIs', 'To encrypt state files', 'To manage permissions'],
    correctAnswer: 1,
    explanation: 'Providers are plugins that Terraform uses to interact with cloud providers, SaaS providers, and other APIs.',
    wrongFeedback: ['Variables are separate.', 'Correct! Providers enable API interactions.', 'That\'s backend encryption.', 'That\'s Terraform Cloud.'],
    xpReward: 20,
    tags: ['providers', 'basics'],
  },
  {
    id: 'tf-006',
    levelId: 'terraform',
    difficulty: 'hard',
    question: 'What does "terraform state mv" do?',
    options: ['Moves between providers', 'Renames items in state', 'Migrates to remote backend', 'Moves physical files'],
    correctAnswer: 1,
    explanation: 'terraform state mv moves or renames resources in the state file without destroying them.',
    wrongFeedback: ['Can\'t move between providers.', 'Correct! Renames without destroy/recreate.', 'That\'s terraform init -migrate-state.', 'Not a file operation.'],
    xpReward: 35,
    tags: ['state', 'advanced'],
  },
  {
    id: 'tf-007',
    levelId: 'terraform',
    difficulty: 'hard',
    question: 'What is the purpose of "count" meta-argument?',
    options: ['Count resources in state', 'Create multiple instances', 'Limit API call rate', 'Track resource version'],
    correctAnswer: 1,
    explanation: 'The count meta-argument creates multiple instances of a resource based on a numeric value.',
    wrongFeedback: ['State list does that.', 'Correct! count creates multiple copies.', 'Rate limiting is provider-side.', 'Versioning is separate.'],
    xpReward: 35,
    tags: ['meta-arguments', 'loops'],
  },
  {
    id: 'tf-008',
    levelId: 'terraform',
    difficulty: 'hard',
    question: 'What differs between "count" and "for_each"?',
    options: ['No difference at all', 'count=numbers, for_each=maps', 'for_each is deprecated', 'count is modules only'],
    correctAnswer: 1,
    explanation: 'count uses a number to create indexed instances, while for_each uses a map or set for named instances.',
    wrongFeedback: ['They\'re different.', 'Correct! Different use cases.', 'for_each is recommended.', 'Both work with resources.'],
    xpReward: 35,
    tags: ['meta-arguments', 'loops'],
  },
  {
    id: 'tf-009',
    levelId: 'terraform',
    difficulty: 'evil',
    question: 'Apply fails: "Error: Cycle" with two security groups. Fix?',
    code: 'resource "aws_security_group" "a" {\n  ingress {\n    security_groups = [aws_security_group.b.id]\n  }\n}\nresource "aws_security_group" "b" {\n  ingress {\n    security_groups = [aws_security_group.a.id]\n  }\n}',
    options: ['Use depends_on to break', 'Use separate rule resources', 'Delete then recreate both', 'Increase parallelism'],
    correctAnswer: 1,
    explanation: 'Circular dependencies in inline rules can be broken by using separate aws_security_group_rule resources.',
    wrongFeedback: ['depends_on won\'t help cycles.', 'Correct! Separate rules break the cycle.', 'Won\'t fix the config issue.', 'Parallelism doesn\'t affect cycles.'],
    xpReward: 50,
    tags: ['troubleshooting', 'dependencies'],
  },
  {
    id: 'tf-010',
    levelId: 'terraform',
    difficulty: 'evil',
    question: 'State shows resource, console doesn\'t. Plan says "No changes". Fix?',
    options: ['Resource was deleted', 'State is corrupted', 'Provider cache stale', 'Run terraform refresh'],
    correctAnswer: 3,
    explanation: 'Terraform needs refresh to sync state with actual infrastructure. Run terraform refresh or plan -refresh-only.',
    wrongFeedback: ['Yes, but plan should detect it after refresh.', 'Unlikely.', 'Not how providers work.', 'Correct! Refresh syncs state with reality.'],
    xpReward: 50,
    tags: ['state', 'troubleshooting'],
  },
  {
    id: 'tf-011',
    levelId: 'terraform',
    difficulty: 'easy',
    question: 'How to destroy all Terraform infrastructure?',
    options: ['terraform delete', 'terraform destroy', 'terraform remove', 'terraform clean'],
    correctAnswer: 1,
    explanation: 'terraform destroy removes all resources defined in your Terraform configuration.',
    wrongFeedback: ['Not a command.', 'Correct! destroy removes all.', 'Not valid.', 'Not a command.'],
    xpReward: 10,
    tags: ['commands', 'basics'],
  },
  {
    id: 'tf-012',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'What is a Terraform module?',
    options: ['A single .tf file', 'Container for resources', 'Cloud provider plugin', 'State file backup'],
    correctAnswer: 1,
    explanation: 'A module is a container for multiple resources that are used together, promoting reusability.',
    wrongFeedback: ['Files aren\'t modules alone.', 'Correct! Modules group resources.', 'That\'s a provider.', 'That\'s state management.'],
    xpReward: 20,
    tags: ['modules', 'organization'],
  },
  {
    id: 'tf-013',
    levelId: 'terraform',
    difficulty: 'hard',
    question: 'What does "prevent_destroy = true" do?',
    options: ['Prevents accidental deletes', 'Makes resource immutable', 'Disables destroy command', 'Creates backup first'],
    correctAnswer: 0,
    explanation: 'prevent_destroy causes Terraform to reject any plan that would destroy the resource.',
    wrongFeedback: ['Correct! Protects critical resources.', 'Resources can still be updated.', 'destroy works on other resources.', 'No backup functionality.'],
    xpReward: 35,
    tags: ['lifecycle', 'safety'],
  },
  {
    id: 'tf-014',
    levelId: 'terraform',
    difficulty: 'evil',
    question: 'Team overwrites each other\'s changes. State inconsistent. Solution?',
    options: ['Gitignore state files', 'Remote backend with locking', 'Run terraform sequentially', 'Disable team access'],
    correctAnswer: 1,
    explanation: 'Remote backends with state locking (S3+DynamoDB, Terraform Cloud) prevent concurrent modifications.',
    wrongFeedback: ['Doesn\'t solve concurrency.', 'Correct! Locking prevents conflicts.', 'Not scalable.', 'Not practical.'],
    xpReward: 50,
    tags: ['state', 'enterprise', 'collaboration'],
  },
  {
    id: 'tf-015',
    levelId: 'terraform',
    difficulty: 'easy',
    question: 'What does terraform validate do?',
    options: ['Checks config syntax', 'Applies configuration', 'Destroys resources', 'Downloads providers'],
    correctAnswer: 0,
    explanation: 'terraform validate checks whether a configuration is syntactically valid and internally consistent.',
    wrongFeedback: ['Correct! Validates syntax.', 'That\'s apply.', 'That\'s destroy.', 'That\'s init.'],
    xpReward: 10,
    tags: ['commands', 'basics'],
  },
  {
    id: 'tf-016',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'What is a data source in Terraform?',
    options: ['Creates new resources', 'Reads existing resources', 'Stores state data', 'Defines variables'],
    correctAnswer: 1,
    explanation: 'Data sources allow Terraform to read information from resources not managed by the current configuration.',
    wrongFeedback: ['Resources create.', 'Correct! Data sources read existing.', 'That\'s state file.', 'That\'s variable block.'],
    xpReward: 20,
    tags: ['data-sources', 'reading'],
  },
  {
    id: 'tf-017',
    levelId: 'terraform',
    difficulty: 'hard',
    question: 'What is terraform workspace used for?',
    options: ['Switch code branches', 'Manage multiple states', 'Change working directory', 'Switch cloud regions'],
    correctAnswer: 1,
    explanation: 'Workspaces allow managing multiple state files for the same configuration, useful for environments.',
    wrongFeedback: ['That\'s git.', 'Correct! Workspaces manage states.', 'That\'s cd.', 'That\'s provider config.'],
    xpReward: 35,
    tags: ['workspaces', 'environments'],
  },
  {
    id: 'tf-018',
    levelId: 'terraform',
    difficulty: 'medium',
    question: 'How do you pass a variable via command line?',
    options: ['terraform apply -v var', 'terraform apply -var="x=y"', 'terraform apply --set x=y', 'terraform apply -variable x'],
    correctAnswer: 1,
    explanation: 'Use -var="name=value" to pass variables on the command line.',
    wrongFeedback: ['Invalid syntax.', 'Correct! -var sets variables.', 'Invalid syntax.', 'Invalid syntax.'],
    xpReward: 20,
    tags: ['variables', 'commands'],
  },
  {
    id: 'tf-019',
    levelId: 'terraform',
    difficulty: 'evil',
    question: 'Apply works locally but fails in CI with "no valid credential sources". Issue?',
    options: ['Wrong Terraform version', 'Missing provider creds in CI', 'State file is locked', 'Module source invalid'],
    correctAnswer: 1,
    explanation: 'CI environments need credentials configured via environment variables or CI secrets, not local profiles.',
    wrongFeedback: ['Version mismatch shows different error.', 'Correct! Configure CI credentials.', 'Different error message.', 'Different error.'],
    xpReward: 50,
    tags: ['cicd', 'troubleshooting'],
  },
  {
    id: 'tf-020',
    levelId: 'terraform',
    difficulty: 'hard',
    question: 'What does "create_before_destroy" lifecycle do?',
    options: ['Creates backup first', 'New resource before delete', 'Runs create twice', 'Prevents destruction'],
    correctAnswer: 1,
    explanation: 'create_before_destroy creates the new resource before destroying the old one, reducing downtime.',
    wrongFeedback: ['Not a backup.', 'Correct! Reduces downtime.', 'Only creates once.', 'That\'s prevent_destroy.'],
    xpReward: 35,
    tags: ['lifecycle', 'zero-downtime'],
  },
  {
    id: 'tf-boss',
    levelId: 'terraform',
    difficulty: 'evil',
    question: 'üèÜ BOSS: State corrupted, no backup. Production running. Recovery?',
    options: ['terraform destroy', 'terraform import to rebuild', 'Restore tfstate.backup', 'Contact HashiCorp'],
    correctAnswer: 1,
    explanation: 'terraform import can rebuild state by importing existing resources. Never destroy production without state!',
    wrongFeedback: ['Never destroy production blindly!', 'Correct! Import rebuilds state from existing resources.', 'No backup was stated.', 'Support can\'t recover your state.'],
    xpReward: 100,
    tags: ['boss', 'disaster-recovery', 'state'],
    isBoss: true,
  },
];
